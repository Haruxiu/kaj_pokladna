import{r as y,a as Nt,R as O,L as fe,u as _n,b as so,g as io,c as ao,H as lo,d as co,e as me}from"./vendor-B_bwUmiI.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var $n={exports:{}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=y,po=Symbol.for("react.element"),fo=Symbol.for("react.fragment"),mo=Object.prototype.hasOwnProperty,ho=uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,go={key:!0,ref:!0,__self:!0,__source:!0};function Gn(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)mo.call(t,r)&&!go.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:po,type:e,key:s,ref:i,props:o,_owner:ho.current}}Ve.Fragment=fo;Ve.jsx=Gn;Ve.jsxs=Gn;$n.exports=Ve;var p=$n.exports,Wn,Qt=Nt;Wn=Qt.createRoot,Qt.hydrateRoot;const bo=e=>function(n){const r=_n();return p.jsx(e,{...n,location:r})};class vo extends O.Component{constructor(t){super(t),this.state={},this.handlePrintLastReceipt=this.handlePrintLastReceipt.bind(this)}isActive(t){return this.props.location.pathname===t}handlePrintLastReceipt(){const{history:t,showReceipt:n}=this.props;if(t&&t.length>0){const r=t[t.length-1];n(r.id)}else alert("Historie plateb je prázdná. Žádná účtenka k tisku.")}render(){const{history:t,showReceipt:n,location:r}=this.props;return p.jsxs("nav",{className:"main-nav",role:"navigation","aria-label":"Hlavní navigace",children:[p.jsxs("ul",{role:"menubar",children:[p.jsx("li",{role:"none",children:p.jsx(fe,{to:"/",className:this.isActive("/")?"active":"",role:"menuitem","aria-current":this.isActive("/")?"page":void 0,children:"Objednávky"})}),p.jsx("li",{role:"none",children:p.jsx(fe,{to:"/new-order",className:this.isActive("/new-order")?"active":"",role:"menuitem","aria-current":this.isActive("/new-order")?"page":void 0,children:"Nová objednávka"})}),p.jsx("li",{role:"none",children:p.jsx(fe,{to:"/payment",className:this.isActive("/payment")?"active":"",role:"menuitem","aria-current":this.isActive("/payment")?"page":void 0,children:"Platba"})}),p.jsx("li",{role:"none",children:p.jsx(fe,{to:"/history",className:this.isActive("/history")?"active":"",role:"menuitem","aria-current":this.isActive("/history")?"page":void 0,children:"Historie"})}),p.jsx("li",{role:"none",children:p.jsx(fe,{to:"/menu",className:this.isActive("/menu")?"active":"",role:"menuitem","aria-current":this.isActive("/menu")?"page":void 0,children:"Menu"})})]}),p.jsxs("div",{className:"nav-footer",children:[p.jsxs("div",{className:"help-contact",role:"complementary","aria-label":"Kontaktní informace",children:[p.jsx("h4",{children:"Potřebujete pomoc?"}),p.jsxs("p",{children:["Zavolejte na: ",p.jsx("a",{href:"tel:+420123456789","aria-label":"Zavolejte na +420 123 456 789",children:"+420 123 456 789"})]}),p.jsxs("p",{children:["Email: ",p.jsx("a",{href:"mailto:podpora@restaurant.cz","aria-label":"Napište na podpora@restaurant.cz",children:"podpora@restaurant.cz"})]})]}),p.jsxs("div",{className:"nav-actions",role:"toolbar","aria-label":"Akce",children:[p.jsx("button",{className:"nav-action-btn",onClick:this.handlePrintLastReceipt,"aria-label":"Vytisknout poslední účtenku",children:"Vytisknout poslední účtenku"}),p.jsx("button",{className:"nav-action-btn",onClick:()=>alert("Zálohování dat..."),"aria-label":"Zálohovat data",children:"Zálohovat data"})]})]})]})}}const yo=bo(vo);class Hn extends O.Component{constructor(t){super(t),this.state={showStatusChange:!1,previousStatus:null,audioRef:O.createRef()},this.handleStatusChange=this.handleStatusChange.bind(this),this.handleRevertStatus=this.handleRevertStatus.bind(this),this.getStatusInfo=this.getStatusInfo.bind(this)}getStatusInfo(t){switch(t){case"pending":return{text:"Čeká na přípravu",class:"pending"};case"ready":return{text:`Připraveno
k platbě`,class:"ready"};case"paid":return{text:"Zaplaceno",class:"paid"};default:return{text:t,class:""}}}handleStatusChange(t){const{updateStatus:n,order:r}=this.props;this.setState({previousStatus:r.status,showStatusChange:!0}),n(r.id,t),t==="ready"&&this.state.audioRef.current&&this.state.audioRef.current.play()}handleRevertStatus(){const{updateStatus:t,order:n}=this.props,{previousStatus:r}=this.state;r&&(t(n.id,r),this.setState({showStatusChange:!1,previousStatus:null}))}render(){const{order:t,compact:n,updateStatus:r}=this.props,{showStatusChange:o,previousStatus:s}=this.state,i=this.getStatusInfo(t.status),a=t.items.reduce((l,d)=>l+d.price,0);return p.jsxs("div",{className:`order-card ${n?"compact":""}`,role:"article",children:[p.jsx("audio",{ref:this.state.audioRef,src:"/prepared.mp3",preload:"auto"}),p.jsxs("div",{className:"order-header",children:[p.jsxs("div",{children:[p.jsxs("h3",{children:["Objednávka #",t.id.toString().slice(-4)]}),!n&&p.jsx("div",{className:"table-info",role:"status",children:t.tableName})]}),p.jsx("div",{className:"order-status",children:o?p.jsxs("div",{className:"status-change",children:[p.jsx("span",{className:`status-badge ${i.class}`,role:"status","aria-label":`Stav objednávky: ${i.text}`,children:i.text}),p.jsx("button",{className:"revert-btn",onClick:this.handleRevertStatus,"aria-label":"Vrátit předchozí stav",children:"↩"})]}):p.jsx("span",{className:`status-badge ${i.class}`,role:"status","aria-label":`Stav objednávky: ${i.text}`,children:i.text})})]}),p.jsx("div",{className:"order-items",role:"list",children:t.items.map((l,d)=>p.jsxs("div",{className:"order-item",role:"listitem",children:[p.jsx("span",{children:l.name}),p.jsxs("span",{"aria-label":`${l.price} Kč`,children:[l.price," Kč"]})]},d))}),p.jsxs("div",{className:"order-footer",children:[p.jsxs("div",{className:"order-total",role:"status",children:["Celkem: ",p.jsxs("span",{"aria-label":`Celková částka ${a} Kč`,children:[a," Kč"]})]}),!n&&r&&p.jsx("div",{className:"order-actions",children:t.status==="pending"&&p.jsx("button",{className:"ready-btn",onClick:()=>this.handleStatusChange("ready"),"aria-label":"Označit objednávku jako připravenou",children:"Označit jako připravené"})})]})]})}}class xo extends O.Component{constructor(t){super(t),this.state={isLoading:!0}}componentDidMount(){this.timer=setTimeout(()=>this.setState({isLoading:!1}),500)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{orders:t,updateOrderStatus:n}=this.props,{isLoading:r}=this.state;return r?p.jsx("div",{className:"loading",role:"status","aria-label":"Načítání objednávek",children:"Načítání..."}):p.jsxs("div",{className:"orders-container",role:"main",children:[p.jsx("h2",{children:"Aktivní objednávky"}),t.length===0?p.jsx("div",{className:"empty-state",role:"status","aria-label":"Žádné aktivní objednávky",children:"Žádné aktivní objednávky"}):p.jsx("div",{className:"orders-grid",role:"list","aria-label":"Seznam aktivních objednávek",children:t.map(o=>p.jsx(Hn,{order:o,updateStatus:n},o.id))})]})}}function F(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable",en=Co,tn=()=>Math.random().toString(36).substring(7).split("").join("."),So={INIT:`@@redux/INIT${tn()}`,REPLACE:`@@redux/REPLACE${tn()}`},nn=So;function Io(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Vn(e,t,n){if(typeof e!="function")throw new Error(F(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(F(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(F(1));return n(Vn)(e,t)}let r=e,o=t,s=new Map,i=s,a=0,l=!1;function d(){i===s&&(i=new Map,s.forEach((b,x)=>{i.set(x,b)}))}function f(){if(l)throw new Error(F(3));return o}function u(b){if(typeof b!="function")throw new Error(F(4));if(l)throw new Error(F(5));let x=!0;d();const C=a++;return i.set(C,b),function(){if(x){if(l)throw new Error(F(6));x=!1,d(),i.delete(C),s=null}}}function c(b){if(!Io(b))throw new Error(F(7));if(typeof b.type>"u")throw new Error(F(8));if(typeof b.type!="string")throw new Error(F(17));if(l)throw new Error(F(9));try{l=!0,o=r(o,b)}finally{l=!1}return(s=i).forEach(C=>{C()}),b}function m(b){if(typeof b!="function")throw new Error(F(10));r=b,c({type:nn.REPLACE})}function h(){const b=u;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(F(11));function C(){const I=x;I.next&&I.next(f())}return C(),{unsubscribe:b(C)}},[en](){return this}}}return c({type:nn.INIT}),{dispatch:c,subscribe:u,getState:f,replaceReducer:m,[en]:h}}function rn(e,t){return function(...n){return t(e.apply(this,n))}}function on(e,t){if(typeof e=="function")return rn(e,t);if(typeof e!="object"||e===null)throw new Error(F(16));const n={};for(const r in e){const o=e[r];typeof o=="function"&&(n[r]=rn(o,t))}return n}function Un(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Do(...e){return t=>(n,r)=>{const o=t(n,r);let s=()=>{throw new Error(F(15))};const i={getState:o.getState,dispatch:(l,...d)=>s(l,...d)},a=e.map(l=>l(i));return s=Un(...a)(o.dispatch),{...o,dispatch:s}}}var No={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ee=y;function wo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Eo=typeof Object.is=="function"?Object.is:wo,Oo=Ee.useSyncExternalStore,Ro=Ee.useRef,Po=Ee.useEffect,Ao=Ee.useMemo,jo=Ee.useDebugValue;No.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Ro(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Ao(function(){function l(m){if(!d){if(d=!0,f=m,m=r(m),o!==void 0&&i.hasValue){var h=i.value;if(o(h,m))return u=h}return u=m}if(h=u,Eo(f,m))return h;var g=r(m);return o!==void 0&&o(h,g)?(f=m,h):(f=m,u=g)}var d=!1,f,u,c=n===void 0?null:n;return[function(){return l(t())},c===null?void 0:function(){return l(c())}]},[t,n,r,o]);var a=Oo(e,s[0],s[1]);return Po(function(){i.hasValue=!0,i.value=a},[a]),jo(a),a};var To=y.version.startsWith("19"),Mo=Symbol.for(To?"react.transitional.element":"react.element"),ko=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),Lo=Symbol.for("react.strict_mode"),Fo=Symbol.for("react.profiler"),_o=Symbol.for("react.consumer"),$o=Symbol.for("react.context"),zn=Symbol.for("react.forward_ref"),Go=Symbol.for("react.suspense"),Wo=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),Ho=Symbol.for("react.lazy"),Vo=zn,Uo=wt;function zo(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Mo:switch(e=e.type,e){case Bo:case Fo:case Lo:case Go:case Wo:return e;default:switch(e=e&&e.$$typeof,e){case $o:case zn:case Ho:case wt:return e;case _o:return e;default:return t}}case ko:return t}}}function qo(e){return zo(e)===wt}function Ko(e,t,n,r,{areStatesEqual:o,areOwnPropsEqual:s,areStatePropsEqual:i}){let a=!1,l,d,f,u,c;function m(C,D){return l=C,d=D,f=e(l,d),u=t(r,d),c=n(f,u,d),a=!0,c}function h(){return f=e(l,d),t.dependsOnOwnProps&&(u=t(r,d)),c=n(f,u,d),c}function g(){return e.dependsOnOwnProps&&(f=e(l,d)),t.dependsOnOwnProps&&(u=t(r,d)),c=n(f,u,d),c}function b(){const C=e(l,d),D=!i(C,f);return f=C,D&&(c=n(f,u,d)),c}function x(C,D){const I=!s(D,d),w=!o(C,l,D,d);return l=C,d=D,I&&w?h():I?g():w?b():c}return function(D,I){return a?x(D,I):m(D,I)}}function Yo(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...o}){const s=t(e,o),i=n(e,o),a=r(e,o);return Ko(s,i,a,e,o)}function Jo(e,t){const n={};for(const r in e){const o=e[r];typeof o=="function"&&(n[r]=(...s)=>t(o(...s)))}return n}function bt(e){return function(n){const r=e(n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function sn(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function qn(e,t){return function(r,{displayName:o}){const s=function(a,l){return s.dependsOnOwnProps?s.mapToProps(a,l):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,l){s.mapToProps=e,s.dependsOnOwnProps=sn(e);let d=s(a,l);return typeof d=="function"&&(s.mapToProps=d,s.dependsOnOwnProps=sn(d),d=s(a,l)),d},s}}function Et(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function Zo(e){return e&&typeof e=="object"?bt(t=>Jo(e,t)):e?typeof e=="function"?qn(e):Et(e,"mapDispatchToProps"):bt(t=>({dispatch:t}))}function Xo(e){return e?typeof e=="function"?qn(e):Et(e,"mapStateToProps"):bt(()=>({}))}function Qo(e,t,n){return{...n,...e,...t}}function es(e){return function(n,{displayName:r,areMergedPropsEqual:o}){let s=!1,i;return function(l,d,f){const u=e(l,d,f);return s?o(u,i)||(i=u):(s=!0,i=u),i}}}function ts(e){return e?typeof e=="function"?es(e):Et(e,"mergeProps"):()=>Qo}function ns(e){e()}function rs(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ns(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!r||e===null||(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var an={notify(){},get:()=>[]};function Kn(e,t){let n,r=an,o=0,s=!1;function i(g){f();const b=r.subscribe(g);let x=!1;return()=>{x||(x=!0,b(),u())}}function a(){r.notify()}function l(){h.onStateChange&&h.onStateChange()}function d(){return s}function f(){o++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=rs())}function u(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=an)}function c(){s||(s=!0,f())}function m(){s&&(s=!1,u())}const h={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:d,trySubscribe:c,tryUnsubscribe:m,getListeners:()=>r};return h}var os=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ss=os(),is=()=>typeof navigator<"u"&&navigator.product==="ReactNative",as=is(),ls=()=>ss||as?y.useLayoutEffect:y.useEffect,ke=ls();function ln(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function st(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!ln(e[n[o]],t[n[o]]))return!1;return!0}var cs={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ds={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},us={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Yn={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ps={[Vo]:us,[Uo]:Yn};function cn(e){return qo(e)?Yn:ps[e.$$typeof]||cs}var fs=Object.defineProperty,ms=Object.getOwnPropertyNames,dn=Object.getOwnPropertySymbols,hs=Object.getOwnPropertyDescriptor,gs=Object.getPrototypeOf,un=Object.prototype;function vt(e,t){if(typeof t!="string"){if(un){const s=gs(t);s&&s!==un&&vt(e,s)}let n=ms(t);dn&&(n=n.concat(dn(t)));const r=cn(e),o=cn(t);for(let s=0;s<n.length;++s){const i=n[s];if(!ds[i]&&!(o&&o[i])&&!(r&&r[i])){const a=hs(t,i);try{fs(e,i,a)}catch{}}}}return e}var it=Symbol.for("react-redux-context"),at=typeof globalThis<"u"?globalThis:{};function bs(){if(!y.createContext)return{};const e=at[it]??(at[it]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var Jn=bs(),vs=[null,null];function ys(e,t,n){ke(()=>e(...t),n)}function xs(e,t,n,r,o,s){e.current=r,n.current=!1,o.current&&(o.current=null,s())}function Cs(e,t,n,r,o,s,i,a,l,d,f){if(!e)return()=>{};let u=!1,c=null;const m=()=>{if(u||!a.current)return;const g=t.getState();let b,x;try{b=r(g,o.current)}catch(C){x=C,c=C}x||(c=null),b===s.current?i.current||d():(s.current=b,l.current=b,i.current=!0,f())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,c)throw c}}function Ss(e,t){return e===t}function Is(e,t,n,{pure:r,areStatesEqual:o=Ss,areOwnPropsEqual:s=st,areStatePropsEqual:i=st,areMergedPropsEqual:a=st,forwardRef:l=!1,context:d=Jn}={}){const f=d,u=Xo(e),c=Zo(t),m=ts(n),h=!!e;return b=>{const x=b.displayName||b.name||"Component",C=`Connect(${x})`,D={shouldHandleStateChanges:h,displayName:C,wrappedComponentName:x,WrappedComponent:b,initMapStateToProps:u,initMapDispatchToProps:c,initMergeProps:m,areStatesEqual:o,areStatePropsEqual:i,areOwnPropsEqual:s,areMergedPropsEqual:a};function I(j){const[P,H,A]=y.useMemo(()=>{const{reactReduxForwardedRef:V,...pe}=j;return[j.context,V,pe]},[j]),T=y.useMemo(()=>{let V=f;return P!=null&&P.Consumer,V},[P,f]),_=y.useContext(T),J=!!j.store&&!!j.store.getState&&!!j.store.dispatch,Xe=!!_&&!!_.store,Y=J?j.store:_.store,Kt=Xe?_.getServerState:Y.getState,Qe=y.useMemo(()=>Yo(Y.dispatch,D),[Y]),[de,Yt]=y.useMemo(()=>{if(!h)return vs;const V=Kn(Y,J?void 0:_.subscription),pe=V.notifyNestedSubs.bind(V);return[V,pe]},[Y,J,_]),Jt=y.useMemo(()=>J?_:{..._,subscription:de},[J,_,de]),et=y.useRef(void 0),tt=y.useRef(A),ue=y.useRef(void 0),Zt=y.useRef(!1),nt=y.useRef(!1),rt=y.useRef(void 0);ke(()=>(nt.current=!0,()=>{nt.current=!1}),[]);const Xt=y.useMemo(()=>()=>ue.current&&A===tt.current?ue.current:Qe(Y.getState(),A),[Y,A]),oo=y.useMemo(()=>pe=>de?Cs(h,Y,de,Qe,tt,et,Zt,nt,ue,Yt,pe):()=>{},[de]);ys(xs,[tt,et,Zt,A,ue,Yt]);let Pe;try{Pe=y.useSyncExternalStore(oo,Xt,Kt?()=>Qe(Kt(),A):Xt)}catch(V){throw rt.current&&(V.message+=`
The error may be correlated with this previous error:
${rt.current.stack}

`),V}ke(()=>{rt.current=void 0,ue.current=void 0,et.current=Pe});const ot=y.useMemo(()=>y.createElement(b,{...Pe,ref:H}),[H,b,Pe]);return y.useMemo(()=>h?y.createElement(T.Provider,{value:Jt},ot):ot,[T,ot,Jt])}const N=y.memo(I);if(N.WrappedComponent=b,N.displayName=I.displayName=C,l){const P=y.forwardRef(function(A,T){return y.createElement(N,{...A,reactReduxForwardedRef:T})});return P.displayName=C,P.WrappedComponent=b,vt(P,b)}return vt(N,b)}}var Zn=Is;function Ds(e){const{children:t,context:n,serverState:r,store:o}=e,s=y.useMemo(()=>{const l=Kn(o);return{store:o,subscription:l,getServerState:r?()=>r:void 0}},[o,r]),i=y.useMemo(()=>o.getState(),[o]);ke(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==o.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,i]);const a=n||Jn;return y.createElement(a.Provider,{value:s},t)}var Ns=Ds,ws="Invariant failed";function Es(e,t){throw new Error(ws)}var K=function(t){var n=t.top,r=t.right,o=t.bottom,s=t.left,i=r-s,a=o-n,l={top:n,right:r,bottom:o,left:s,width:i,height:a,x:s,y:n,center:{x:(r+s)/2,y:(o+n)/2}};return l},Ot=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},pn=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},Os=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},lt={top:0,right:0,bottom:0,left:0},Rt=function(t){var n=t.borderBox,r=t.margin,o=r===void 0?lt:r,s=t.border,i=s===void 0?lt:s,a=t.padding,l=a===void 0?lt:a,d=K(Ot(n,o)),f=K(pn(n,i)),u=K(pn(f,l));return{marginBox:d,borderBox:K(n),paddingBox:f,contentBox:u,margin:o,border:i,padding:l}},U=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var o=Number(n);return isNaN(o)&&Es(),o},Rs=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Be=function(t,n){var r=t.borderBox,o=t.border,s=t.margin,i=t.padding,a=Os(r,n);return Rt({borderBox:a,border:o,margin:s,padding:i})},Le=function(t,n){return n===void 0&&(n=Rs()),Be(t,n)},Xn=function(t,n){var r={top:U(n.marginTop),right:U(n.marginRight),bottom:U(n.marginBottom),left:U(n.marginLeft)},o={top:U(n.paddingTop),right:U(n.paddingRight),bottom:U(n.paddingBottom),left:U(n.paddingLeft)},s={top:U(n.borderTopWidth),right:U(n.borderRightWidth),bottom:U(n.borderBottomWidth),left:U(n.borderLeftWidth)};return Rt({borderBox:t,margin:r,padding:o,border:s})},Qn=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return Xn(n,r)},xe=function(t){var n=[],r=null,o=function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o};function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(null,arguments)}function er(e,t){}er.bind(null,"warn");er.bind(null,"error");function Z(){}function Ps(e,t){return{...e,...t}}function z(e,t,n){const r=t.map(o=>{const s=Ps(n,o.options);return e.addEventListener(o.eventName,o.fn,s),function(){e.removeEventListener(o.eventName,o.fn,s)}});return function(){r.forEach(s=>{s()})}}const As="Invariant failed";class _e extends Error{}_e.prototype.toString=function(){return this.message};function v(e,t){throw new _e(As)}class js extends O.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Z,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof _e&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=z(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof _e){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Ts=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,$e=e=>e+1,Ms=e=>`
  You have lifted an item in position ${$e(e.source.index)}
`,tr=(e,t)=>{const n=e.droppableId===t.droppableId,r=$e(e.index),o=$e(t.index);return n?`
      You have moved the item from position ${r}
      to position ${o}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},nr=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,ks=e=>{const t=e.destination;if(t)return tr(e.source,t);const n=e.combine;return n?nr(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},fn=e=>`
  The item has returned to its starting position
  of ${$e(e.index)}
`,Bs=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${fn(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${tr(e.source,t)}
    `:n?`
      You have dropped the item.
      ${nr(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${fn(e.source)}
  `},Me={dragHandleUsageInstructions:Ts,onDragStart:Ms,onDragUpdate:ks,onDragEnd:Bs};function Ls(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function rr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Ls(e[n],t[n]))return!1;return!0}function E(e,t){const n=y.useState(()=>({inputs:t,result:e()}))[0],r=y.useRef(!0),o=y.useRef(n),i=r.current||!!(t&&o.current.inputs&&rr(t,o.current.inputs))?o.current:{inputs:t,result:e()};return y.useEffect(()=>{r.current=!1,o.current=i},[i]),i.result}function S(e,t){return E(()=>e,t)}const k={x:0,y:0},B=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),$=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),X=(e,t)=>e.x===t.x&&e.y===t.y,ae=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ne=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Ce=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),mn=(e,t)=>Math.min(...t.map(n=>Ce(e,n))),or=e=>t=>({x:e(t.x),y:e(t.y)});var Fs=(e,t)=>{const n=K({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Oe=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),hn=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],_s={top:0,right:0,bottom:0,left:0},$s=(e,t)=>t?Oe(e,t.scroll.diff.displacement):e,Gs=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Ws=(e,t)=>t&&t.shouldClipSubject?Fs(t.pageMarginBox,e):K(e);var oe=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const o=$s(e.marginBox,r),s=Gs(o,n,t),i=Ws(s,r);return{page:e,withPlaceholder:t,active:i}},Pt=(e,t)=>{e.frame||v();const n=e.frame,r=$(t,n.scroll.initial),o=ae(r),s={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}},i=oe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:i}};function M(e,t=rr){let n=null;function r(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const s=e.apply(this,o);return n={lastResult:s,lastArgs:o,lastThis:this},s}return r.clear=function(){n=null},r}const sr=M(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),ir=M(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Ue=M(e=>Object.values(e)),Hs=M(e=>Object.values(e));var le=M((e,t)=>Hs(t).filter(r=>e===r.descriptor.droppableId).sort((r,o)=>r.descriptor.index-o.descriptor.index));function At(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function ze(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var qe=M((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Vs=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:o})=>{if(!n.isCombineEnabled||!At(o))return null;function i(m){const h={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...o,at:h}}const a=o.displaced.all,l=a.length?a[0]:null;if(e)return l?i(l):null;const d=qe(t,r);if(!l){if(!d.length)return null;const m=d[d.length-1];return i(m.descriptor.id)}const f=d.findIndex(m=>m.descriptor.id===l);f===-1&&v();const u=f-1;if(u<0)return null;const c=d[u];return i(c.descriptor.id)},ce=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const ar={point:k,value:0},Se={invisible:{},visible:{},all:[]},Us={displaced:Se,displacedBy:ar,at:null};var q=(e,t)=>n=>e<=n&&n<=t,lr=e=>{const t=q(e.top,e.bottom),n=q(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(s&&i)return!0;const l=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return l&&d?!0:l&&i||d&&s}},zs=e=>{const t=q(e.top,e.bottom),n=q(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const jt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},cr={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var qs=e=>t=>{const n=q(t.top,t.bottom),r=q(t.left,t.right);return o=>e===jt?n(o.top)&&n(o.bottom):r(o.left)&&r(o.right)};const Ks=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:k;return Oe(e,n)},Ys=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,Js=(e,t,n)=>n(t)(e),Tt=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:o})=>{const s=r?Ks(e,t):e;return Ys(s,t,o)&&Js(s,n,o)},Zs=e=>Tt({...e,isVisibleThroughFrameFn:lr}),dr=e=>Tt({...e,isVisibleThroughFrameFn:zs}),Xs=e=>Tt({...e,isVisibleThroughFrameFn:qs(e.destination.axis)}),Qs=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:o}=t;if(r[e])return!1;const s=o[e];return s?s.shouldAnimate:!0};function ei(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return K(Ot(n,r))}function Ie({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:o,last:s}){return e.reduce(function(a,l){const d=ei(l,n),f=l.descriptor.id;if(a.all.push(f),!Zs({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const c=Qs(f,s,o),m={draggableId:f,shouldAnimate:c};return a.visible[f]=m,a},{all:[],visible:{},invisible:{}})}function ti(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function gn({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const o=ti(e,{inHomeList:t});return{displaced:Se,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Ge({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:o,last:s,index:i,forceShouldAnimate:a}){const l=ce(e,n);if(i==null)return gn({insideDestination:t,inHomeList:l,displacedBy:o,destination:n});const d=t.find(h=>h.descriptor.index===i);if(!d)return gn({insideDestination:t,inHomeList:l,displacedBy:o,destination:n});const f=qe(e,t),u=t.indexOf(d),c=f.slice(u);return{displaced:Ie({afterDragging:c,destination:n,displacedBy:o,last:s,viewport:r.frame,forceShouldAnimate:a}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Q(e,t){return!!t.effected[e]}var ni=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const s=r.draggableId,a=n[s].descriptor.index;return Q(s,o)?e?a:a-1:e?a+1:a},ri=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const o=r.index,s=e?o+1:o-1,i=n[0].descriptor.index,a=n[n.length-1].descriptor.index,l=t?a:a+1;return s<i||s>l?null:s},oi=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:o,insideDestination:s,previousImpact:i,viewport:a,afterCritical:l})=>{const d=i.at;if(d||v(),d.type==="REORDER"){const u=ri({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:s});return u==null?null:Ge({draggable:n,insideDestination:s,destination:o,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:u})}const f=ni({isMovingForward:e,destination:o,displaced:i.displaced,draggables:r,combine:d.combine,afterCritical:l});return f==null?null:Ge({draggable:n,insideDestination:s,destination:o,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:f})},si=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const o=!!(e.visible[n]||e.invisible[n]);return Q(n,t)?o?k:ae(r.point):o?r.point:k},ii=({afterCritical:e,impact:t,draggables:n})=>{const r=ze(t);r||v();const o=r.draggableId,s=n[o].page.borderBox.center,i=si({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return B(s,i)};const ur=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,ai=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Mt=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,bn=({axis:e,moveRelativeTo:t,isMoving:n})=>ne(e.line,t.marginBox[e.end]+ur(e,n),Mt(e,t.marginBox,n)),vn=({axis:e,moveRelativeTo:t,isMoving:n})=>ne(e.line,t.marginBox[e.start]-ai(e,n),Mt(e,t.marginBox,n)),li=({axis:e,moveInto:t,isMoving:n})=>ne(e.line,t.contentBox[e.start]+ur(e,n),Mt(e,t.contentBox,n));var ci=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o})=>{const s=le(r.descriptor.id,n),i=t.page,a=r.axis;if(!s.length)return li({axis:a,moveInto:r.page,isMoving:i});const{displaced:l,displacedBy:d}=e,f=l.all[0];if(f){const c=n[f];if(Q(f,o))return vn({axis:a,moveRelativeTo:c.page,isMoving:i});const m=Be(c.page,d.point);return vn({axis:a,moveRelativeTo:m,isMoving:i})}const u=s[s.length-1];if(u.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Q(u.descriptor.id,o)){const c=Be(u.page,ae(o.displacedBy.point));return bn({axis:a,moveRelativeTo:c,isMoving:i})}return bn({axis:a,moveRelativeTo:u.page,isMoving:i})},yt=(e,t)=>{const n=e.frame;return n?B(t,n.scroll.diff.displacement):t};const di=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:o})=>{const s=t.page.borderBox.center,i=e.at;return!n||!i?s:i.type==="REORDER"?ci({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o}):ii({impact:e,draggables:r,afterCritical:o})};var Ke=e=>{const t=di(e),n=e.droppable;return n?yt(n,t):t},pr=(e,t)=>{const n=$(t,e.scroll.initial),r=ae(n);return{frame:K({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function yn(e,t){return e.map(n=>t[n])}function ui(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var pi=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:o})=>{const s=pr(t,B(t.scroll.current,o)),i=n.frame?Pt(n,B(n.frame.scroll.current,o)):n,a=e.displaced,l=Ie({afterDragging:yn(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),d=Ie({afterDragging:yn(a.all,r),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),f={},u={},c=[a,l,d];return a.all.forEach(h=>{const g=ui(h,c);if(g){u[h]=g;return}f[h]=!0}),{...e,displaced:{all:a.all,invisible:f,visible:u}}},fi=(e,t)=>B(e.scroll.diff.displacement,t),kt=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=fi(n,e),o=$(r,t.page.borderBox.center);return B(t.client.borderBox.center,o)},fr=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:o,onlyOnMainAxis:s=!1})=>{const i=$(n,e.page.borderBox.center),l={target:Oe(e.page.borderBox,i),destination:t,withDroppableDisplacement:o,viewport:r};return s?Xs(l):dr(l)},mi=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:o,viewport:s,previousPageBorderBoxCenter:i,previousClientSelection:a,afterCritical:l})=>{if(!n.isEnabled)return null;const d=le(n.descriptor.id,r),f=ce(t,n),u=Vs({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:o})||oi({isMovingForward:e,isInHomeList:f,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:o,viewport:s,afterCritical:l});if(!u)return null;const c=Ke({impact:u,draggable:t,droppable:n,draggables:r,afterCritical:l});if(fr({draggable:t,destination:n,newPageBorderBoxCenter:c,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:kt({pageBorderBoxCenter:c,draggable:t,viewport:s}),impact:u,scrollJumpRequest:null};const h=$(c,i),g=pi({impact:u,viewport:s,destination:n,draggables:r,maxScrollChange:h});return{clientSelection:a,impact:g,scrollJumpRequest:h}};const L=e=>{const t=e.subject.active;return t||v(),t};var hi=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:o})=>{const s=n.subject.active;if(!s)return null;const i=n.axis,a=q(s[i.start],s[i.end]),l=Ue(r).filter(f=>f!==n).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>lr(o.frame)(L(f))).filter(f=>{const u=L(f);return e?s[i.crossAxisEnd]<u[i.crossAxisEnd]:u[i.crossAxisStart]<s[i.crossAxisStart]}).filter(f=>{const u=L(f),c=q(u[i.start],u[i.end]);return a(u[i.start])||a(u[i.end])||c(s[i.start])||c(s[i.end])}).sort((f,u)=>{const c=L(f)[i.crossAxisStart],m=L(u)[i.crossAxisStart];return e?c-m:m-c}).filter((f,u,c)=>L(f)[i.crossAxisStart]===L(c[0])[i.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const d=l.filter(f=>q(L(f)[i.start],L(f)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((f,u)=>L(f)[i.start]-L(u)[i.start])[0]:l.sort((f,u)=>{const c=mn(t,hn(L(f))),m=mn(t,hn(L(u)));return c!==m?c-m:L(f)[i.start]-L(u)[i.start]})[0]};const xn=(e,t)=>{const n=e.page.borderBox.center;return Q(e.descriptor.id,t)?$(n,t.displacedBy.point):n},gi=(e,t)=>{const n=e.page.borderBox;return Q(e.descriptor.id,t)?Oe(n,ae(t.displacedBy.point)):n};var bi=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:o})=>r.filter(i=>dr({target:gi(i,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,a)=>{const l=Ce(e,yt(n,xn(i,o))),d=Ce(e,yt(n,xn(a,o)));return l<d?-1:d<l?1:i.descriptor.index-a.descriptor.index})[0]||null,Re=M(function(t,n){const r=n[t.line];return{value:r,point:ne(t.line,r)}});const vi=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return ne(r.line,t[r.line]);const o=e.subject.page.contentBox[r.size],l=le(e.descriptor.id,n).reduce((d,f)=>d+f.client.marginBox[r.size],0)+t[r.line]-o;return l<=0?null:ne(r.line,l)},mr=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),hr=(e,t,n)=>{const r=e.frame;ce(t,e)&&v(),e.subject.withPlaceholder&&v();const o=Re(e.axis,t.displaceBy).point,s=vi(e,o,n),i={placeholderSize:o,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const f=oe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:f}}const a=s?B(r.scroll.max,s):r.scroll.max,l=mr(r,a),d=oe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return{...e,subject:d,frame:l}},yi=e=>{const t=e.subject.withPlaceholder;t||v();const n=e.frame;if(!n){const i=oe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const r=t.oldFrameMaxScroll;r||v();const o=mr(n,r),s=oe({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:s,frame:o}};var xi=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:o,destination:s,viewport:i,afterCritical:a})=>{if(!t){if(n.length)return null;const u={displaced:Se,displacedBy:ar,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},c=Ke({impact:u,draggable:r,droppable:s,draggables:o,afterCritical:a}),m=ce(r,s)?s:hr(s,r,o);return fr({draggable:r,destination:m,newPageBorderBoxCenter:c,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}const l=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],d=(()=>{const u=t.descriptor.index;return t.descriptor.id===r.descriptor.id||l?u:u+1})(),f=Re(s.axis,r.displaceBy);return Ge({draggable:r,insideDestination:n,destination:s,viewport:i,displacedBy:f,last:Se,index:d})},Ci=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:o,droppables:s,viewport:i,afterCritical:a})=>{const l=hi({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:i});if(!l)return null;const d=le(l.descriptor.id,o),f=bi({pageBorderBoxCenter:t,viewport:i,destination:l,insideDestination:d,afterCritical:a}),u=xi({previousPageBorderBoxCenter:t,destination:l,draggable:n,draggables:o,moveRelativeTo:f,insideDestination:d,viewport:i,afterCritical:a});if(!u)return null;const c=Ke({impact:u,draggable:n,droppable:l,draggables:o,afterCritical:a});return{clientSelection:kt({pageBorderBoxCenter:c,draggable:n,viewport:i}),impact:u,scrollJumpRequest:null}},G=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Si=(e,t)=>{const n=G(e);return n?t[n]:null};var Ii=({state:e,type:t})=>{const n=Si(e.impact,e.dimensions.droppables),r=!!n,o=e.dimensions.droppables[e.critical.droppable.id],s=n||o,i=s.axis.direction,a=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:u,droppables:c}=e.dimensions;return a?mi({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:d,destination:s,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Ci({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:d,isOver:s,draggables:u,droppables:c,viewport:e.viewport,afterCritical:e.afterCritical})};function te(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function gr(e){const t=q(e.top,e.bottom),n=q(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function Di(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Ni({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,o=n.map(s=>{const i=s.axis,a=ne(s.axis.line,e.center[i.line],s.page.borderBox.center[i.crossAxisLine]);return{id:s.descriptor.id,distance:Ce(r,a)}}).sort((s,i)=>i.distance-s.distance);return o[0]?o[0].id:null}function wi({pageBorderBox:e,draggable:t,droppables:n}){const r=Ue(n).filter(o=>{if(!o.isEnabled)return!1;const s=o.subject.active;if(!s||!Di(e,s))return!1;if(gr(s)(e.center))return!0;const i=o.axis,a=s.center[i.crossAxisLine],l=e[i.crossAxisStart],d=e[i.crossAxisEnd],f=q(s[i.crossAxisStart],s[i.crossAxisEnd]),u=f(l),c=f(d);return!u&&!c?!0:u?l<a:d>a});return r.length?r.length===1?r[0].descriptor.id:Ni({pageBorderBox:e,draggable:t,candidates:r}):null}const br=(e,t)=>K(Oe(e,t));var Ei=(e,t)=>{const n=e.frame;return n?br(t,n.scroll.diff.value):t};function vr({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Oi({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Ri=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:o,viewport:s,afterCritical:i})=>{const a=n.axis,l=Re(n.axis,t.displaceBy),d=l.value,f=e[a.start],u=e[a.end],m=qe(t,r).find(g=>{const b=g.descriptor.id,x=g.page.borderBox.center[a.line],C=Q(b,i),D=vr({displaced:o,id:b});return C?D?u<=x:f<x-d:D?u<=x+d:f<x})||null,h=Oi({draggable:t,closest:m,inHomeList:ce(t,n)});return Ge({draggable:t,insideDestination:r,destination:n,viewport:s,last:o,displacedBy:l,index:h})};const Pi=4;var Ai=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:o,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const i=r.axis,a=Re(r.axis,e.displaceBy),l=a.value,d=t[i.start],f=t[i.end],c=qe(e,o).find(h=>{const g=h.descriptor.id,b=h.page.borderBox,C=b[i.size]/Pi,D=Q(g,s),I=vr({displaced:n.displaced,id:g});return D?I?f>b[i.start]+C&&f<b[i.end]-C:d>b[i.start]-l+C&&d<b[i.end]-l-C:I?f>b[i.start]+l+C&&f<b[i.end]+l-C:d>b[i.start]+C&&d<b[i.end]-C});return c?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:c.descriptor.id,droppableId:r.descriptor.id}}}:null},yr=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:o,viewport:s,afterCritical:i})=>{const a=br(t.page.borderBox,e),l=wi({pageBorderBox:a,draggable:t,droppables:r});if(!l)return Us;const d=r[l],f=le(d.descriptor.id,n),u=Ei(d,a);return Ai({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:o,destination:d,insideDestination:f,afterCritical:i})||Ri({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:d,insideDestination:f,last:o.displaced,viewport:s,afterCritical:i})},Bt=(e,t)=>({...e,[t.descriptor.id]:t});const ji=({previousImpact:e,impact:t,droppables:n})=>{const r=G(e),o=G(t);if(!r||r===o)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const i=yi(s);return Bt(n,i)};var Ti=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:o})=>{const s=ji({previousImpact:r,impact:o,droppables:n}),i=G(o);if(!i)return s;const a=n[i];if(ce(e,a)||a.subject.withPlaceholder)return s;const l=hr(a,e,t);return Bt(s,l)},ve=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:o,scrollJumpRequest:s})=>{const i=r||e.viewport,a=n||e.dimensions,l=t||e.current.client.selection,d=$(l,e.initial.client.selection),f={offset:d,selection:l,borderBoxCenter:B(e.initial.client.borderBoxCenter,d)},u={selection:B(f.selection,i.scroll.current),borderBoxCenter:B(f.borderBoxCenter,i.scroll.current),offset:B(f.offset,i.scroll.diff.value)},c={client:f,page:u};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:i,current:c};const m=a.draggables[e.critical.draggable.id],h=o||yr({pageOffset:u.offset,draggable:m,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),g=Ti({draggable:m,impact:h,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:c,dimensions:{draggables:a.draggables,droppables:g},impact:h,viewport:i,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function Mi(e,t){return e.map(n=>t[n])}var xr=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:o})=>{const s=e.displaced,i=Mi(s.all,n),a=Ie({afterDragging:i,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:s});return{...e,displaced:a}},Cr=({impact:e,draggable:t,droppable:n,draggables:r,viewport:o,afterCritical:s})=>{const i=Ke({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s});return kt({pageBorderBoxCenter:i,draggable:t,viewport:o})},Sr=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&v();const r=e.impact,o=n||e.viewport,s=t||e.dimensions,{draggables:i,droppables:a}=s,l=i[e.critical.draggable.id],d=G(r);d||v();const f=a[d],u=xr({impact:r,viewport:o,destination:f,draggables:i}),c=Cr({impact:u,draggable:l,droppable:f,draggables:i,viewport:o,afterCritical:e.afterCritical});return ve({impact:u,clientSelection:c,state:e,dimensions:s,viewport:o})},ki=e=>({index:e.index,droppableId:e.droppableId}),Ir=({draggable:e,home:t,draggables:n,viewport:r})=>{const o=Re(t.axis,e.displaceBy),s=le(t.descriptor.id,n),i=s.indexOf(e);i===-1&&v();const a=s.slice(i+1),l=a.reduce((c,m)=>(c[m.descriptor.id]=!0,c),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:l};return{impact:{displaced:Ie({afterDragging:a,destination:t,displacedBy:o,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:ki(e.descriptor)}},afterCritical:d}},Bi=(e,t)=>({draggables:e.draggables,droppables:Bt(e.droppables,t)}),Li=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=Be(e.client,t),o=Le(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:o}},Fi=e=>{const t=e.frame;return t||v(),t},_i=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(o=>{const s=o.descriptor.droppableId,i=t[s],l=Fi(i).scroll.diff.value,d=B(r,l);return Li({draggable:o,offset:d,initialWindowScroll:n.scroll.initial})})},$i=({state:e,published:t})=>{const n=t.modified.map(x=>{const C=e.dimensions.droppables[x.droppableId];return Pt(C,x.scroll)}),r={...e.dimensions.droppables,...sr(n)},o=ir(_i({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),s={...e.dimensions.draggables,...o};t.removals.forEach(x=>{delete s[x]});const i={droppables:r,draggables:s},a=G(e.impact),l=a?i.droppables[a]:null,d=i.draggables[e.critical.draggable.id],f=i.droppables[e.critical.droppable.id],{impact:u,afterCritical:c}=Ir({draggable:d,home:f,draggables:s,viewport:e.viewport}),m=l&&l.isCombineEnabled?e.impact:u,h=yr({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:e.viewport,afterCritical:c}),g={...e,phase:"DRAGGING",impact:h,onLiftImpact:u,dimensions:i,afterCritical:c,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const xt=e=>e.movementMode==="SNAP",ct=(e,t,n)=>{const r=Bi(e.dimensions,t);return!xt(e)||n?ve({state:e,dimensions:r}):Sr({state:e,dimensions:r})};function dt(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Cn={phase:"IDLE",completed:null,shouldFlush:!1};var Gi=(e=Cn,t)=>{if(t.type==="FLUSH")return{...Cn,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&v();const{critical:n,clientSelection:r,viewport:o,dimensions:s,movementMode:i}=t.payload,a=s.draggables[n.draggable.id],l=s.droppables[n.droppable.id],d={selection:r,borderBoxCenter:a.client.borderBox.center,offset:k},f={client:d,page:{selection:B(d.selection,o.scroll.initial),borderBoxCenter:B(d.selection,o.scroll.initial),offset:B(d.selection,o.scroll.diff.value)}},u=Ue(s.droppables).every(g=>!g.isFixedOnPage),{impact:c,afterCritical:m}=Ir({draggable:a,home:l,draggables:s.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:s,initial:f,current:f,isWindowScrollAllowed:u,impact:c,afterCritical:m,onLiftImpact:c,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&v(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||v(),$i({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;te(e)||v();const{client:n}=t.payload;return X(n,e.current.client.selection)?e:ve({state:e,clientSelection:n,impact:xt(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return dt(e);te(e)||v();const{id:n,newScroll:r}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const s=Pt(o,r);return ct(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;te(e)||v();const{id:n,isEnabled:r}=t.payload,o=e.dimensions.droppables[n];o||v(),o.isEnabled===r&&v();const s={...o,isEnabled:r};return ct(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;te(e)||v();const{id:n,isCombineEnabled:r}=t.payload,o=e.dimensions.droppables[n];o||v(),o.isCombineEnabled===r&&v();const s={...o,isCombineEnabled:r};return ct(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;te(e)||v(),e.isWindowScrollAllowed||v();const n=t.payload.newScroll;if(X(e.viewport.scroll.current,n))return dt(e);const r=pr(e.viewport,n);return xt(e)?Sr({state:e,viewport:r}):ve({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!te(e))return e;const n=t.payload.maxScroll;if(X(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&v();const n=Ii({state:e,type:t.type});return n?ve({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&v(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||v(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function R(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Wi=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Hi=e=>({type:"LIFT",payload:e}),Vi=e=>({type:"INITIAL_PUBLISH",payload:e}),Ui=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),zi=()=>({type:"COLLECTION_STARTING",payload:null}),qi=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Ki=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Yi=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Dr=e=>({type:"MOVE",payload:e}),Ji=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Zi=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Xi=()=>({type:"MOVE_UP",payload:null}),Qi=()=>({type:"MOVE_DOWN",payload:null}),ea=()=>({type:"MOVE_RIGHT",payload:null}),ta=()=>({type:"MOVE_LEFT",payload:null}),Lt=()=>({type:"FLUSH",payload:null}),na=e=>({type:"DROP_ANIMATE",payload:e}),Ft=e=>({type:"DROP_COMPLETE",payload:e}),Nr=e=>({type:"DROP",payload:e}),ra=e=>({type:"DROP_PENDING",payload:e}),wr=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var oa=e=>({getState:t,dispatch:n})=>r=>o=>{if(!R(o,"LIFT")){r(o);return}const{id:s,clientSelection:i,movementMode:a}=o.payload,l=t();l.phase==="DROP_ANIMATING"&&n(Ft({completed:l.completed})),t().phase!=="IDLE"&&v(),n(Lt()),n(Wi({draggableId:s,movementMode:a}));const f={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:u,dimensions:c,viewport:m}=e.startPublishing(f);n(Vi({critical:u,dimensions:c,clientSelection:i,movementMode:a,viewport:m}))},sa=e=>()=>t=>n=>{R(n,"INITIAL_PUBLISH")&&e.dragging(),R(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(R(n,"FLUSH")||R(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const _t={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},De={opacity:{drop:0,combining:.7},scale:{drop:.75}},Er={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ee=`${Er.outOfTheWay}s ${_t.outOfTheWay}`,ye={fluid:`opacity ${ee}`,snap:`transform ${ee}, opacity ${ee}`,drop:e=>{const t=`${e}s ${_t.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${ee}`,placeholder:`height ${ee}, width ${ee}, margin ${ee}`},Sn=e=>X(e,k)?void 0:`translate(${e.x}px, ${e.y}px)`,Ct={moveTo:Sn,drop:(e,t)=>{const n=Sn(e);if(n)return t?`${n} scale(${De.scale.drop})`:n}},{minDropTime:St,maxDropTime:Or}=Er,ia=Or-St,In=1500,aa=.6;var la=({current:e,destination:t,reason:n})=>{const r=Ce(e,t);if(r<=0)return St;if(r>=In)return Or;const o=r/In,s=St+ia*o,i=n==="CANCEL"?s*aa:s;return Number(i.toFixed(2))},ca=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:o})=>{const{draggables:s,droppables:i}=n,a=G(e),l=a?i[a]:null,d=i[t.descriptor.droppableId],f=Cr({impact:e,draggable:t,draggables:s,afterCritical:o,droppable:l||d,viewport:r});return $(f,t.client.borderBox.center)},da=({draggables:e,reason:t,lastImpact:n,home:r,viewport:o,onLiftImpact:s})=>!n.at||t!=="DROP"?{impact:xr({draggables:e,impact:s,destination:r,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Se},didDropInsideDroppable:!0};const ua=({getState:e,dispatch:t})=>n=>r=>{if(!R(r,"DROP")){n(r);return}const o=e(),s=r.payload.reason;if(o.phase==="COLLECTING"){t(ra({reason:s}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&v(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||v();const a=o.critical,l=o.dimensions,d=l.draggables[o.critical.draggable.id],{impact:f,didDropInsideDroppable:u}=da({reason:s,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),c=u?At(f):null,m=u?ze(f):null,h={index:a.draggable.index,droppableId:a.droppable.id},g={draggableId:d.descriptor.id,type:d.descriptor.type,source:h,reason:s,mode:o.movementMode,destination:c,combine:m},b=ca({impact:f,draggable:d,dimensions:l,viewport:o.viewport,afterCritical:o.afterCritical}),x={critical:o.critical,afterCritical:o.afterCritical,result:g,impact:f};if(!(!X(o.current.client.offset,b)||!!g.combine)){t(Ft({completed:x}));return}const D=la({current:o.current.client.offset,destination:b,reason:s});t(na({newHomeClientOffset:b,dropDuration:D,completed:x}))};var Rr=()=>({x:window.pageXOffset,y:window.pageYOffset});function pa(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function fa({onWindowScroll:e}){function t(){e(Rr())}const n=xe(t),r=pa(n);let o=Z;function s(){return o!==Z}function i(){s()&&v(),o=z(window,[r])}function a(){s()||v(),n.cancel(),o(),o=Z}return{start:i,stop:a,isActive:s}}const ma=e=>R(e,"DROP_COMPLETE")||R(e,"DROP_ANIMATE")||R(e,"FLUSH"),ha=e=>{const t=fa({onWindowScroll:n=>{e.dispatch(Ji({newScroll:n}))}});return n=>r=>{!t.isActive()&&R(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&ma(r)&&t.stop(),n(r)}};var ga=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),o=s=>{t||n||(t=!0,e(s),clearTimeout(r))};return o.wasCalled=()=>t,o},ba=()=>{const e=[],t=o=>{const s=e.findIndex(a=>a.timerId===o);s===-1&&v();const[i]=e.splice(s,1);i.callback()};return{add:o=>{const s=setTimeout(()=>t(s)),i={timerId:s,callback:o};e.push(i)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const va=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,ya=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,xa=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},he=(e,t)=>{t()},Ae=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function ut(e,t,n,r){if(!e){n(r(t));return}const o=ga(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}var Ca=(e,t)=>{const n=ba();let r=null;const o=(u,c)=>{r&&v(),he("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:u,mode:c})})},s=(u,c)=>{r&&v(),he("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Ae(u,c))})},i=(u,c)=>{r&&v();const m=Ae(u,c);r={mode:c,lastCritical:u,lastLocation:m.source,lastCombine:null},n.add(()=>{he("onDragStart",()=>ut(e().onDragStart,m,t,Me.onDragStart))})},a=(u,c)=>{const m=At(c),h=ze(c);r||v();const g=!xa(u,r.lastCritical);g&&(r.lastCritical=u);const b=!va(r.lastLocation,m);b&&(r.lastLocation=m);const x=!ya(r.lastCombine,h);if(x&&(r.lastCombine=h),!g&&!b&&!x)return;const C={...Ae(u,r.mode),combine:h,destination:m};n.add(()=>{he("onDragUpdate",()=>ut(e().onDragUpdate,C,t,Me.onDragUpdate))})},l=()=>{r||v(),n.flush()},d=u=>{r||v(),r=null,he("onDragEnd",()=>ut(e().onDragEnd,u,t,Me.onDragEnd))};return{beforeCapture:o,beforeStart:s,start:i,update:a,flush:l,drop:d,abort:()=>{if(!r)return;const u={...Ae(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(u)}}},Sa=(e,t)=>{const n=Ca(e,t);return r=>o=>s=>{if(R(s,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(R(s,"INITIAL_PUBLISH")){const a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),o(s),n.start(a,s.payload.movementMode);return}if(R(s,"DROP_COMPLETE")){const a=s.payload.completed.result;n.flush(),o(s),n.drop(a);return}if(o(s),R(s,"FLUSH")){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const Ia=e=>t=>n=>{if(!R(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&v(),e.dispatch(Ft({completed:r.completed}))},Da=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>s=>{if((R(s,"FLUSH")||R(s,"DROP_COMPLETE")||R(s,"DROP_ANIMATION_FINISHED"))&&r(),o(s),!R(s,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(wr())}};n=requestAnimationFrame(()=>{n=null,t=z(window,[i])})}};var Na=e=>()=>t=>n=>{(R(n,"DROP_COMPLETE")||R(n,"FLUSH")||R(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},wa=e=>{let t=!1;return()=>n=>r=>{if(R(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(R(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(R(r,"DROP_COMPLETE")){t=!1;const o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Ea=e=>R(e,"DROP_COMPLETE")||R(e,"DROP_ANIMATE")||R(e,"FLUSH");var Oa=e=>t=>n=>r=>{if(Ea(r)){e.stop(),n(r);return}if(R(r,"INITIAL_PUBLISH")){n(r);const o=t.getState();o.phase!=="DRAGGING"&&v(),e.start(o);return}n(r),e.scroll(t.getState())};const Ra=e=>t=>n=>{if(t(n),!R(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Nr({reason:r.reason})))},Pa=Un;var Aa=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:o,autoScroller:s})=>Vn(Gi,Pa(Do(sa(n),Na(e),oa(e),ua,Ia,Da,Ra,Oa(s),ha,wa(t),Sa(r,o))));const pt=()=>({additions:{},removals:{},modified:{}});function ja({registry:e,callbacks:t}){let n=pt(),r=null;const o=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:l,removals:d,modified:f}=n,u=Object.keys(l).map(h=>e.draggable.getById(h).getDimension(k)).sort((h,g)=>h.descriptor.index-g.descriptor.index),c=Object.keys(f).map(h=>{const b=e.droppable.getById(h).callbacks.getScrollWhileDragging();return{droppableId:h,scroll:b}}),m={additions:u,removals:Object.keys(d),modified:c};n=pt(),t.publish(m)}))};return{add:l=>{const d=l.descriptor.id;n.additions[d]=l,n.modified[l.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],o()},remove:l=>{const d=l.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],o()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=pt())}}}var Pr=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const o=$({x:t,y:e},{x:r,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Ar=()=>{const e=document.documentElement;return e||v(),e},jr=()=>{const e=Ar();return Pr({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Ta=()=>{const e=Rr(),t=jr(),n=e.y,r=e.x,o=Ar(),s=o.clientWidth,i=o.clientHeight,a=r+s,l=n+i;return{frame:K({top:n,left:r,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:k,displacement:k}}}},Ma=({critical:e,scrollOptions:t,registry:n})=>{const r=Ta(),o=r.scroll.current,s=e.droppable,i=n.droppable.getAllByType(s.type).map(f=>f.callbacks.getDimensionAndWatchScroll(o,t)),a=n.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(o));return{dimensions:{draggables:ir(a),droppables:sr(i)},critical:e,viewport:r}};function Dn(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var ka=(e,t)=>{let n=null;const r=ja({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(c,m)=>{e.droppable.exists(c)||v(),n&&t.updateDroppableIsEnabled({id:c,isEnabled:m})},s=(c,m)=>{n&&(e.droppable.exists(c)||v(),t.updateDroppableIsCombineEnabled({id:c,isCombineEnabled:m}))},i=(c,m)=>{n&&(e.droppable.exists(c)||v(),t.updateDroppableScroll({id:c,newScroll:m}))},a=(c,m)=>{n&&e.droppable.getById(c).callbacks.scroll(m)},l=()=>{if(!n)return;r.stop();const c=n.critical.droppable;e.droppable.getAllByType(c.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},d=c=>{n||v();const m=n.critical.draggable;c.type==="ADDITION"&&Dn(e,m,c.value)&&r.add(c.value),c.type==="REMOVAL"&&Dn(e,m,c.value)&&r.remove(c.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:i,startPublishing:c=>{n&&v();const m=e.draggable.getById(c.draggableId),h=e.droppable.getById(m.descriptor.droppableId),g={draggable:m.descriptor,droppable:h.descriptor},b=e.subscribe(d);return n={critical:g,unsubscribe:b},Ma({critical:g,registry:e,scrollOptions:c.scrollOptions})},stopPublishing:l}},Tr=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Ba=e=>{window.scrollBy(e.x,e.y)};const La=M(e=>Ue(e).filter(t=>!(!t.isEnabled||!t.frame))),Fa=(e,t)=>La(t).find(r=>(r.frame||v(),gr(r.frame.pageMarginBox)(e)))||null;var _a=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return Fa(e,n)};const Ne={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var $a=(e,t,n=()=>Ne)=>{const r=n(),o=e[t.size]*r.startFromPercentage,s=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:s}},Mr=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},$t=1,Ga=(e,t,n=()=>Ne)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return $t;const s=1-Mr({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=r.maxPixelScroll*r.ease(s);return Math.ceil(i)},Wa=(e,t,n)=>{const r=n(),o=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,i=t,a=s,d=Date.now()-i;if(d>=s)return e;if(d<o)return $t;const f=Mr({startOfRange:o,endOfRange:a,current:d}),u=e*r.ease(f);return Math.ceil(u)},Nn=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:o})=>{const s=Ga(e,t,o);return s===0?0:r?Math.max(Wa(s,n,o),$t):s},wn=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=$a(e,r,s);return t[r.end]<t[r.start]?Nn({distanceToEdge:t[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s}):-1*Nn({distanceToEdge:t[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s})},Ha=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,o=t.width>e.width;return!o&&!r?n:o&&r?null:{x:o?0:n.x,y:r?0:n.y}};const Va=or(e=>e===0?0:e);var kr=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=wn({container:t,distanceToEdges:i,dragStartTime:e,axis:jt,shouldUseTimeDampening:o,getAutoScrollerOptions:s}),l=wn({container:t,distanceToEdges:i,dragStartTime:e,axis:cr,shouldUseTimeDampening:o,getAutoScrollerOptions:s}),d=Va({x:l,y:a});if(X(d,k))return null;const f=Ha({container:t,subject:n,proposedScroll:d});return f?X(f,k)?null:f:null};const Ua=or(e=>e===0?0:e>0?1:-1),Gt=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const o=B(t,r),s={x:e(o.x,n.x),y:e(o.y,n.y)};return X(s,k)?null:s}})(),Br=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=Ua(n),s=Gt({max:r,current:t,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},Wt=(e,t)=>Br({current:e.scroll.current,max:e.scroll.max,change:t}),za=(e,t)=>{if(!Wt(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Gt({current:r,max:n,change:t})},Ht=(e,t)=>{const n=e.frame;return n?Br({current:n.scroll.current,max:n.scroll.max,change:t}):!1},qa=(e,t)=>{const n=e.frame;return!n||!Ht(e,t)?null:Gt({current:n.scroll.current,max:n.scroll.max,change:t})};var Ka=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=kr({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s});return i&&Wt(e,i)?i:null},Ya=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=e.frame;if(!i)return null;const a=kr({dragStartTime:r,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s});return a&&Ht(e,a)?a:null},En=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:o,getAutoScrollerOptions:s})=>{const i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const u=e.viewport,c=Ka({dragStartTime:t,viewport:u,subject:l,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(c){r(c);return}}const d=_a({center:i,destination:G(e.impact),droppables:e.dimensions.droppables});if(!d)return;const f=Ya({dragStartTime:t,droppable:d,subject:l,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:s});f&&o(d.descriptor.id,f)},Ja=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Ne})=>{const r=xe(e),o=xe(t);let s=null;const i=d=>{s||v();const{shouldUseTimeDampening:f,dragStartTime:u}=s;En({state:d,scrollWindow:r,scrollDroppable:o,dragStartTime:u,shouldUseTimeDampening:f,getAutoScrollerOptions:n})};return{start:d=>{s&&v();const f=Date.now();let u=!1;const c=()=>{u=!0};En({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:c,scrollDroppable:c,getAutoScrollerOptions:n}),s={dragStartTime:f,shouldUseTimeDampening:u},u&&i(d)},stop:()=>{s&&(r.cancel(),o.cancel(),s=null)},scroll:i}},Za=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,l)=>{const d=B(a.current.client.selection,l);e({client:d})},o=(a,l)=>{if(!Ht(a,l))return l;const d=qa(a,l);if(!d)return t(a.descriptor.id,l),null;const f=$(l,d);return t(a.descriptor.id,f),$(l,f)},s=(a,l,d)=>{if(!a||!Wt(l,d))return d;const f=za(l,d);if(!f)return n(d),null;const u=$(d,f);return n(u),$(d,u)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const d=G(a.impact);d||v();const f=o(a.dimensions.droppables[d],l);if(!f)return;const u=a.viewport,c=s(a.isWindowScrollAllowed,u,f);c&&r(a,c)}},Xa=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const o=Ja({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),s=Za({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(r().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){o.scroll(l);return}l.scrollJumpRequest&&s(l)}},start:o.start,stop:o.stop}};const se="data-rfd",ie=(()=>{const e=`${se}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),It=(()=>{const e=`${se}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Qa=(()=>{const e=`${se}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),On={contextId:`${se}-scroll-container-context-id`},el=e=>t=>`[${t}="${e}"]`,ge=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),tl="pointer-events: none;";var nl=e=>{const t=el(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ie.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:tl,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${ye.outOfTheWay};
    `;return{selector:t(It.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),o={selector:t(Qa.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ge(i,"always"),resting:ge(i,"resting"),dragging:ge(i,"dragging"),dropAnimating:ge(i,"dropAnimating"),userCancel:ge(i,"userCancel")}};const W=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect,ft=()=>{const e=document.querySelector("head");return e||v(),e},Rn=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function rl(e,t){const n=E(()=>nl(e),[e]),r=y.useRef(null),o=y.useRef(null),s=S(M(u=>{const c=o.current;c||v(),c.textContent=u}),[]),i=S(u=>{const c=r.current;c||v(),c.textContent=u},[]);W(()=>{!r.current&&!o.current||v();const u=Rn(t),c=Rn(t);return r.current=u,o.current=c,u.setAttribute(`${se}-always`,e),c.setAttribute(`${se}-dynamic`,e),ft().appendChild(u),ft().appendChild(c),i(n.always),s(n.resting),()=>{const m=h=>{const g=h.current;g||v(),ft().removeChild(g),h.current=null};m(r),m(o)}},[t,i,s,n.always,n.resting,e]);const a=S(()=>s(n.dragging),[s,n.dragging]),l=S(u=>{if(u==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),d=S(()=>{o.current&&s(n.resting)},[s,n.resting]);return E(()=>({dragging:a,dropping:l,resting:d}),[a,l,d])}function Lr(e,t){return Array.from(e.querySelectorAll(t))}var Fr=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Ye(e){return e instanceof Fr(e).HTMLElement}function ol(e,t){const n=`[${ie.contextId}="${e}"]`,r=Lr(document,n);if(!r.length)return null;const o=r.find(s=>s.getAttribute(ie.draggableId)===t);return!o||!Ye(o)?null:o}function sl(e){const t=y.useRef({}),n=y.useRef(null),r=y.useRef(null),o=y.useRef(!1),s=S(function(c,m){const h={id:c,focus:m};return t.current[c]=h,function(){const b=t.current;b[c]!==h&&delete b[c]}},[]),i=S(function(c){const m=ol(e,c);m&&m!==document.activeElement&&m.focus()},[e]),a=S(function(c,m){n.current===c&&(n.current=m)},[]),l=S(function(){r.current||o.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const c=n.current;c&&i(c)}))},[i]),d=S(function(c){n.current=null;const m=document.activeElement;m&&m.getAttribute(ie.draggableId)===c&&(n.current=c)},[]);return W(()=>(o.current=!0,function(){o.current=!1;const c=r.current;c&&cancelAnimationFrame(c)}),[]),E(()=>({register:s,tryRecordFocus:d,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[s,d,l,a])}function il(){const e={draggables:{},droppables:{}},t=[];function n(u){return t.push(u),function(){const m=t.indexOf(u);m!==-1&&t.splice(m,1)}}function r(u){t.length&&t.forEach(c=>c(u))}function o(u){return e.draggables[u]||null}function s(u){const c=o(u);return c||v(),c}const i={register:u=>{e.draggables[u.descriptor.id]=u,r({type:"ADDITION",value:u})},update:(u,c)=>{const m=e.draggables[c.descriptor.id];m&&m.uniqueId===u.uniqueId&&(delete e.draggables[c.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:u=>{const c=u.descriptor.id,m=o(c);m&&u.uniqueId===m.uniqueId&&(delete e.draggables[c],e.droppables[u.descriptor.droppableId]&&r({type:"REMOVAL",value:u}))},getById:s,findById:o,exists:u=>!!o(u),getAllByType:u=>Object.values(e.draggables).filter(c=>c.descriptor.type===u)};function a(u){return e.droppables[u]||null}function l(u){const c=a(u);return c||v(),c}const d={register:u=>{e.droppables[u.descriptor.id]=u},unregister:u=>{const c=a(u.descriptor.id);c&&u.uniqueId===c.uniqueId&&delete e.droppables[u.descriptor.id]},getById:l,findById:a,exists:u=>!!a(u),getAllByType:u=>Object.values(e.droppables).filter(c=>c.descriptor.type===u)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:n,clean:f}}function al(){const e=E(il,[]);return y.useEffect(()=>function(){e.clean()},[e]),e}var Vt=O.createContext(null),We=()=>{const e=document.body;return e||v(),e};const ll={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},cl=e=>`rfd-announcement-${e}`;function dl(e){const t=E(()=>cl(e),[e]),n=y.useRef(null);return y.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Fe(s.style,ll),We().appendChild(s),function(){setTimeout(function(){const l=We();l.contains(s)&&l.removeChild(s),s===n.current&&(n.current=null)})}},[t]),S(o=>{const s=n.current;if(s){s.textContent=o;return}},[])}const ul={separator:"::"};function Ut(e,t=ul){const n=O.useId();return E(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function pl({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function fl({contextId:e,text:t}){const n=Ut("hidden-text",{separator:"-"}),r=E(()=>pl({contextId:e,uniqueId:n}),[n,e]);return y.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=t,s.style.display="none",We().appendChild(s),function(){const a=We();a.contains(s)&&a.removeChild(s)}},[r,t]),r}var Je=O.createContext(null);function _r(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function ml(){let e=null;function t(){return!!e}function n(i){return i===e}function r(i){e&&v();const a={abandon:i};return e=a,a}function o(){e||v(),e=null}function s(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:r,release:o,tryAbandon:s}}function we(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const hl=9,gl=13,zt=27,$r=32,bl=33,vl=34,yl=35,xl=36,Cl=37,Sl=38,Il=39,Dl=40,Nl={[gl]:!0,[hl]:!0};var Gr=e=>{Nl[e.keyCode]&&e.preventDefault()};const Ze=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),Wr=0,Pn=5;function wl(e,t){return Math.abs(t.x-e.x)>=Pn||Math.abs(t.y-e.y)>=Pn}const An={type:"IDLE"};function El({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:o=>{const{button:s,clientX:i,clientY:a}=o;if(s!==Wr)return;const l={x:i,y:a},d=n();if(d.type==="DRAGGING"){o.preventDefault(),d.actions.move(l);return}d.type!=="PENDING"&&v();const f=d.point;if(!wl(f,l))return;o.preventDefault();const u=d.actions.fluidLift(l);r({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:o=>{const s=n();if(s.type!=="DRAGGING"){e();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===zt){o.preventDefault(),e();return}Gr(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const s=n();if(s.type==="IDLE"&&v(),s.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Ze,fn:e}]}function Ol(e){const t=y.useRef(An),n=y.useRef(Z),r=E(()=>({eventName:"mousedown",fn:function(u){if(u.defaultPrevented||u.button!==Wr||u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)return;const c=e.findClosestDraggableId(u);if(!c)return;const m=e.tryGetLock(c,i,{sourceEvent:u});if(!m)return;u.preventDefault();const h={x:u.clientX,y:u.clientY};n.current(),d(m,h)}}),[e]),o=E(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const u=e.findClosestDraggableId(f);if(!u)return;const c=e.findOptionsForDraggable(u);c&&(c.shouldRespectForcePress||e.canGetLock(u)&&f.preventDefault())}}),[e]),s=S(function(){const u={passive:!1,capture:!0};n.current=z(window,[o,r],u)},[o,r]),i=S(()=>{t.current.type!=="IDLE"&&(t.current=An,n.current(),s())},[s]),a=S(()=>{const f=t.current;i(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[i]),l=S(function(){const u={capture:!0,passive:!1},c=El({cancel:a,completed:i,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=z(window,c,u)},[a,i]),d=S(function(u,c){t.current.type!=="IDLE"&&v(),t.current={type:"PENDING",point:c,actions:u},l()},[l]);W(function(){return s(),function(){n.current()}},[s])}function Rl(){}const Pl={[vl]:!0,[bl]:!0,[xl]:!0,[yl]:!0};function Al(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===zt){o.preventDefault(),n();return}if(o.keyCode===$r){o.preventDefault(),r();return}if(o.keyCode===Dl){o.preventDefault(),e.moveDown();return}if(o.keyCode===Sl){o.preventDefault(),e.moveUp();return}if(o.keyCode===Il){o.preventDefault(),e.moveRight();return}if(o.keyCode===Cl){o.preventDefault(),e.moveLeft();return}if(Pl[o.keyCode]){o.preventDefault();return}Gr(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Ze,fn:n}]}function jl(e){const t=y.useRef(Rl),n=E(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==$r)return;const i=e.findClosestDraggableId(s);if(!i)return;const a=e.tryGetLock(i,f,{sourceEvent:s});if(!a)return;s.preventDefault();let l=!0;const d=a.snapLift();t.current();function f(){l||v(),l=!1,t.current(),r()}t.current=z(window,Al(d,f),{capture:!0,passive:!1})}}),[e]),r=S(function(){const s={passive:!1,capture:!0};t.current=z(window,[n],s)},[n]);W(function(){return r(),function(){t.current()}},[r])}const mt={type:"IDLE"},Tl=120,Ml=.15;function kl({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===zt&&n.preventDefault(),e()}},{eventName:Ze,fn:e}]}function Bl({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:s,clientY:i}=r.touches[0],a={x:s,y:i};r.preventDefault(),o.actions.move(a)}},{eventName:"touchend",fn:r=>{const o=n();if(o.type!=="DRAGGING"){e();return}r.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const o=n();o.type==="IDLE"&&v();const s=r.touches[0];if(!s||!(s.force>=Ml))return;const a=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){a&&e();return}if(a){if(o.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Ze,fn:e}]}function Ll(e){const t=y.useRef(mt),n=y.useRef(Z),r=S(function(){return t.current},[]),o=S(function(m){t.current=m},[]),s=E(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const h=e.findClosestDraggableId(m);if(!h)return;const g=e.tryGetLock(h,a,{sourceEvent:m});if(!g)return;const b=m.touches[0],{clientX:x,clientY:C}=b,D={x,y:C};n.current(),u(g,D)}}),[e]),i=S(function(){const m={capture:!0,passive:!1};n.current=z(window,[s],m)},[s]),a=S(()=>{const c=t.current;c.type!=="IDLE"&&(c.type==="PENDING"&&clearTimeout(c.longPressTimerId),o(mt),n.current(),i())},[i,o]),l=S(()=>{const c=t.current;a(),c.type==="DRAGGING"&&c.actions.cancel({shouldBlockNextClick:!0}),c.type==="PENDING"&&c.actions.abort()},[a]),d=S(function(){const m={capture:!0,passive:!1},h={cancel:l,completed:a,getPhase:r},g=z(window,Bl(h),m),b=z(window,kl(h),m);n.current=function(){g(),b()}},[l,r,a]),f=S(function(){const m=r();m.type!=="PENDING"&&v();const h=m.actions.fluidLift(m.point);o({type:"DRAGGING",actions:h,hasMoved:!1})},[r,o]),u=S(function(m,h){r().type!=="IDLE"&&v();const g=setTimeout(f,Tl);o({type:"PENDING",point:h,actions:m,longPressTimerId:g}),d()},[d,r,o,f]);W(function(){return i(),function(){n.current();const h=r();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),o(mt))}},[r,i,o]),W(function(){return z(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Fl=["input","button","textarea","select","option","optgroup","video","audio"];function Hr(e,t){if(t==null)return!1;if(Fl.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:Hr(e,t.parentElement)}function _l(e,t){const n=t.target;return Ye(n)?Hr(e,n):!1}var $l=e=>K(e.getBoundingClientRect()).center;function Gl(e){return e instanceof Fr(e).Element}const Wl=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function Vr(e,t){return e==null?null:e[Wl](t)?e:Vr(e.parentElement,t)}function Hl(e,t){return e.closest?e.closest(t):Vr(e,t)}function Vl(e){return`[${ie.contextId}="${e}"]`}function Ul(e,t){const n=t.target;if(!Gl(n))return null;const r=Vl(e),o=Hl(n,r);return!o||!Ye(o)?null:o}function zl(e,t){const n=Ul(e,t);return n?n.getAttribute(ie.draggableId):null}function ql(e,t){const n=`[${It.contextId}="${e}"]`,o=Lr(document,n).find(s=>s.getAttribute(It.id)===t);return!o||!Ye(o)?null:o}function Kl(e){e.preventDefault()}function je({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function Ur({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const o=n.draggable.findById(r);return!(!o||!o.options.isEnabled||!Tr(t.getState(),r))}function Yl({lockAPI:e,contextId:t,store:n,registry:r,draggableId:o,forceSensorStop:s,sourceEvent:i}){if(!Ur({lockAPI:e,store:n,registry:r,draggableId:o}))return null;const l=r.draggable.getById(o),d=ql(t,l.descriptor.id);if(!d||i&&!l.options.canDragInteractiveElements&&_l(d,i))return null;const f=e.claim(s||Z);let u="PRE_DRAG";function c(){return l.options.shouldRespectForcePress}function m(){return e.isActive(f)}function h(w,N){je({expected:w,phase:u,isLockActive:m,shouldWarn:!0})&&n.dispatch(N())}const g=h.bind(null,"DRAGGING");function b(w){function N(){e.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(N(),v()),n.dispatch(Hi(w.liftActionArgs)),u="DRAGGING";function j(P,H={shouldBlockNextClick:!1}){if(w.cleanup(),H.shouldBlockNextClick){const A=z(window,[{eventName:"click",fn:Kl,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}N(),n.dispatch(Nr({reason:P}))}return{isActive:()=>je({expected:"DRAGGING",phase:u,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:c,drop:P=>j("DROP",P),cancel:P=>j("CANCEL",P),...w.actions}}function x(w){const N=xe(P=>{g(()=>Dr({client:P}))});return{...b({liftActionArgs:{id:o,clientSelection:w,movementMode:"FLUID"},cleanup:()=>N.cancel(),actions:{move:N}}),move:N}}function C(){const w={moveUp:()=>g(Xi),moveRight:()=>g(ea),moveDown:()=>g(Qi),moveLeft:()=>g(ta)};return b({liftActionArgs:{id:o,clientSelection:$l(d),movementMode:"SNAP"},cleanup:Z,actions:w})}function D(){je({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>je({expected:"PRE_DRAG",phase:u,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:c,fluidLift:x,snapLift:C,abort:D}}const Jl=[Ol,jl,Ll];function Zl({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:o}){const s=[...o?Jl:[],...r||[]],i=y.useState(()=>ml())[0],a=S(function(b,x){we(b)&&!we(x)&&i.tryAbandon()},[i]);W(function(){let b=t.getState();return t.subscribe(()=>{const C=t.getState();a(b,C),b=C})},[i,t,a]),W(()=>i.tryAbandon,[i.tryAbandon]);const l=S(g=>Ur({lockAPI:i,registry:n,store:t,draggableId:g}),[i,n,t]),d=S((g,b,x)=>Yl({lockAPI:i,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:b||null,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null}),[e,i,n,t]),f=S(g=>zl(e,g),[e]),u=S(g=>{const b=n.draggable.findById(g);return b?b.options:null},[n.draggable]),c=S(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Lt()))},[i,t]),m=S(()=>i.isClaimed(),[i]),h=E(()=>({canGetLock:l,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:u,tryReleaseLock:c,isLockClaimed:m}),[l,d,f,u,c,m]);for(let g=0;g<s.length;g++)s[g](h)}const Xl=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Nt.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Ql=e=>({...Ne,...e.autoScrollerOptions,durationDampening:{...Ne.durationDampening,...e.autoScrollerOptions}});function be(e){return e.current||v(),e.current}function ec(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:o,dragHandleUsageInstructions:s}=e,i=y.useRef(null),a=_r(e),l=S(()=>Xl(a.current),[a]),d=S(()=>Ql(a.current),[a]),f=dl(t),u=fl({contextId:t,text:s}),c=rl(t,o),m=S(A=>{be(i).dispatch(A)},[]),h=E(()=>on({publishWhileDragging:Ui,updateDroppableScroll:qi,updateDroppableIsEnabled:Ki,updateDroppableIsCombineEnabled:Yi,collectionStarting:zi},m),[m]),g=al(),b=E(()=>ka(g,h),[g,h]),x=E(()=>Xa({scrollWindow:Ba,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:d,...on({move:Dr},m)}),[b.scrollDroppable,m,d]),C=sl(t),D=E(()=>Aa({announce:f,autoScroller:x,dimensionMarshal:b,focusMarshal:C,getResponders:l,styleMarshal:c}),[f,x,b,C,l,c]);i.current=D;const I=S(()=>{const A=be(i);A.getState().phase!=="IDLE"&&A.dispatch(Lt())},[]),w=S(()=>{const A=be(i).getState();return A.phase==="DROP_ANIMATING"?!0:A.phase==="IDLE"?!1:A.isDragging},[]),N=E(()=>({isDragging:w,tryAbort:I}),[w,I]);n(N);const j=S(A=>Tr(be(i).getState(),A),[]),P=S(()=>te(be(i).getState()),[]),H=E(()=>({marshal:b,focus:C,contextId:t,canLift:j,isMovementAllowed:P,dragHandleUsageInstructionsId:u,registry:g}),[t,b,u,C,j,P,g]);return Zl({contextId:t,store:D,registry:g,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>I,[I]),O.createElement(Je.Provider,{value:H},O.createElement(Ns,{context:Vt,store:D},e.children))}function tc(){return O.useId()}function nc(e){const t=tc(),n=e.dragHandleUsageInstructions||Me.dragHandleUsageInstructions;return O.createElement(js,null,r=>O.createElement(ec,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const jn={dragging:5e3,dropAnimating:4500},rc=(e,t)=>t?ye.drop(t.duration):e?ye.snap:ye.fluid,oc=(e,t)=>{if(e)return t?De.opacity.drop:De.opacity.combining},sc=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function ic(e){const n=e.dimension.client,{offset:r,combineWith:o,dropping:s}=e,i=!!o,a=sc(e),l=!!s,d=l?Ct.drop(r,i):Ct.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:rc(a,s),transform:d,opacity:oc(i,l),zIndex:l?jn.dropAnimating:jn.dragging,pointerEvents:"none"}}function ac(e){return{transform:Ct.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function lc(e){return e.type==="DRAGGING"?ic(e):ac(e)}function cc(e,t,n=k){const r=window.getComputedStyle(t),o=t.getBoundingClientRect(),s=Xn(o,r),i=Le(s,n),a={client:s,tagName:t.tagName.toLowerCase(),display:r.display},l={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:s,page:i}}function dc(e){const t=Ut("draggable"),{descriptor:n,registry:r,getDraggableRef:o,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:a}=e,l=E(()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:a}),[s,a,i]),d=S(m=>{const h=o();return h||v(),cc(n,h,m)},[n,o]),f=E(()=>({uniqueId:t,descriptor:n,options:l,getDimension:d}),[n,d,l,t]),u=y.useRef(f),c=y.useRef(!0);W(()=>(r.draggable.register(u.current),()=>r.draggable.unregister(u.current)),[r.draggable]),W(()=>{if(c.current){c.current=!1;return}const m=u.current;u.current=f,r.draggable.update(f,m)},[f,r.draggable])}var qt=O.createContext(null);function He(e){const t=y.useContext(e);return t||v(),t}function uc(e){e.preventDefault()}const pc=e=>{const t=y.useRef(null),n=S((N=null)=>{t.current=N},[]),r=S(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:s,registry:i}=He(Je),{type:a,droppableId:l}=He(qt),d=E(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:f,draggableId:u,isEnabled:c,shouldRespectForcePress:m,canDragInteractiveElements:h,isClone:g,mapped:b,dropAnimationFinished:x}=e;if(!g){const N=E(()=>({descriptor:d,registry:i,getDraggableRef:r,canDragInteractiveElements:h,shouldRespectForcePress:m,isEnabled:c}),[d,i,r,h,m,c]);dc(N)}const C=E(()=>c?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:uc}:null,[o,s,u,c]),D=S(N=>{b.type==="DRAGGING"&&b.dropping&&N.propertyName==="transform"&&Nt.flushSync(x)},[x,b]),I=E(()=>{const N=lc(b),j=b.type==="DRAGGING"&&b.dropping?D:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":u,style:N,onTransitionEnd:j},dragHandleProps:C}},[o,C,u,b,D,n]),w=E(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return O.createElement(O.Fragment,null,f(I,b.snapshot,w))};var zr=(e,t)=>e===t,qr=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const fc=e=>e.combine?e.combine.draggableId:null,mc=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function hc(){const e=M((o,s)=>({x:o,y:s})),t=M((o,s,i=null,a=null,l=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!l,dropAnimation:l,mode:o,draggingOver:i,combineWith:a,combineTargetFor:null})),n=M((o,s,i,a,l=null,d=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:d,mode:s,offset:o,dimension:i,forceShouldAnimate:f,snapshot:t(s,a,l,d,null)}}));return(o,s)=>{if(we(o)){if(o.critical.draggable.id!==s.draggableId)return null;const i=o.current.client.offset,a=o.dimensions.draggables[s.draggableId],l=G(o.impact),d=mc(o.impact),f=o.forceShouldAnimate;return n(e(i.x,i.y),o.movementMode,a,s.isClone,l,d,f)}if(o.phase==="DROP_ANIMATING"){const i=o.completed;if(i.result.draggableId!==s.draggableId)return null;const a=s.isClone,l=o.dimensions.draggables[s.draggableId],d=i.result,f=d.mode,u=qr(d),c=fc(d),h={duration:o.dropDuration,curve:_t.drop,moveTo:o.newHomeClientOffset,opacity:c?De.opacity.drop:null,scale:c?De.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:l,dropping:h,draggingOver:u,combineWith:c,mode:f,forceShouldAnimate:null,snapshot:t(f,a,u,c,h)}}}return null}}function Kr(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const gc={mapped:{type:"SECONDARY",offset:k,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Kr(null)}};function bc(){const e=M((i,a)=>({x:i,y:a})),t=M(Kr),n=M((i,a=null,l)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),r=i=>i?n(k,i,!0):null,o=(i,a,l,d)=>{const f=l.displaced.visible[i],u=!!(d.inVirtualList&&d.effected[i]),c=ze(l),m=c&&c.draggableId===i?a:null;if(!f){if(!u)return r(m);if(l.displaced.invisible[i])return null;const b=ae(d.displacedBy.point),x=e(b.x,b.y);return n(x,m,!0)}if(u)return r(m);const h=l.displacedBy.point,g=e(h.x,h.y);return n(g,m,f.shouldAnimate)};return(i,a)=>{if(we(i))return i.critical.draggable.id===a.draggableId?null:o(a.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const l=i.completed;return l.result.draggableId===a.draggableId?null:o(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const vc=()=>{const e=hc(),t=bc();return(r,o)=>e(r,o)||t(r,o)||gc},yc={dropAnimationFinished:wr},xc=Zn(vc,yc,null,{context:Vt,areStatePropsEqual:zr})(pc);function Yr(e){return He(qt).isUsingCloneFor===e.draggableId&&!e.isClone?null:O.createElement(xc,e)}function Cc(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return O.createElement(Yr,Fe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const Jr=e=>t=>e===t,Sc=Jr("scroll"),Ic=Jr("auto"),Tn=(e,t)=>t(e.overflowX)||t(e.overflowY),Dc=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Tn(n,Sc)||Tn(n,Ic)},Nc=()=>!1,Zr=e=>e==null?null:e===document.body?Nc()?e:null:e===document.documentElement?null:Dc(e)?e:Zr(e.parentElement);var Dt=e=>({x:e.scrollLeft,y:e.scrollTop});const Xr=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Xr(e.parentElement):!1;var wc=e=>{const t=Zr(e),n=Xr(e);return{closestScrollable:t,isFixedOnPage:n}},Ec=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:o,client:s,page:i,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:c,client:m}=a,h=Pr({scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:m,scrollSize:c,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:h,diff:{value:k,displacement:k}}}})(),d=o==="vertical"?jt:cr,f=oe({page:i,withPlaceholder:null,axis:d,frame:l});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:s,page:i,frame:l,subject:f}};const Oc=(e,t)=>{const n=Qn(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,i=o+t.scrollWidth,l=Ot({top:r,right:i,bottom:s,left:o},n.border);return Rt({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})};var Rc=({ref:e,descriptor:t,env:n,windowScroll:r,direction:o,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:a})=>{const l=n.closestScrollable,d=Oc(e,l),f=Le(d,r),u=(()=>{if(!l)return null;const m=Qn(l),h={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:m,page:Le(m,r),scroll:Dt(l),scrollSize:h,shouldClipSubject:a}})();return Ec({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:o,client:d,page:f,closest:u})};const Pc={passive:!1},Ac={passive:!0};var Mn=e=>e.shouldPublishImmediately?Pc:Ac;const Te=e=>e&&e.env.closestScrollable||null;function jc(e){const t=y.useRef(null),n=He(Je),r=Ut("droppable"),{registry:o,marshal:s}=n,i=_r(e),a=E(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=y.useRef(a),d=E(()=>M((I,w)=>{t.current||v();const N={x:I,y:w};s.updateDroppableScroll(a.id,N)}),[a.id,s]),f=S(()=>{const I=t.current;return!I||!I.env.closestScrollable?k:Dt(I.env.closestScrollable)},[]),u=S(()=>{const I=f();d(I.x,I.y)},[f,d]),c=E(()=>xe(u),[u]),m=S(()=>{const I=t.current,w=Te(I);if(I&&w||v(),I.scrollOptions.shouldPublishImmediately){u();return}c()},[c,u]),h=S((I,w)=>{t.current&&v();const N=i.current,j=N.getDroppableRef();j||v();const P=wc(j),H={ref:j,descriptor:a,env:P,scrollOptions:w};t.current=H;const A=Rc({ref:j,descriptor:a,env:P,windowScroll:I,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),T=P.closestScrollable;return T&&(T.setAttribute(On.contextId,n.contextId),T.addEventListener("scroll",m,Mn(H.scrollOptions))),A},[n.contextId,a,m,i]),g=S(()=>{const I=t.current,w=Te(I);return I&&w||v(),Dt(w)},[]),b=S(()=>{const I=t.current;I||v();const w=Te(I);t.current=null,w&&(c.cancel(),w.removeAttribute(On.contextId),w.removeEventListener("scroll",m,Mn(I.scrollOptions)))},[m,c]),x=S(I=>{const w=t.current;w||v();const N=Te(w);N||v(),N.scrollTop+=I.y,N.scrollLeft+=I.x},[]),C=E(()=>({getDimensionAndWatchScroll:h,getScrollWhileDragging:g,dragStopped:b,scroll:x}),[b,h,g,x]),D=E(()=>({uniqueId:r,descriptor:a,callbacks:C}),[C,a,r]);W(()=>(l.current=D.descriptor,o.droppable.register(D),()=>{t.current&&b(),o.droppable.unregister(D)}),[C,a,b,D,s,o.droppable]),W(()=>{t.current&&s.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),W(()=>{t.current&&s.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function ht(){}const kn={width:0,height:0,margin:_s},Tc=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?kn:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Mc=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=Tc({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?ye.placeholder:null}},kc=e=>{const t=y.useRef(null),n=S(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:o,onClose:s,contextId:i}=e,[a,l]=y.useState(e.animate==="open");y.useEffect(()=>a?r!=="open"?(n(),l(!1),ht):t.current?ht:(t.current=setTimeout(()=>{t.current=null,l(!1)}),n):ht,[r,a,n]);const d=S(u=>{u.propertyName==="height"&&(o(),r==="close"&&s())},[r,s,o]),f=Mc({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return O.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var Bc=O.memo(kc);class Lc extends O.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Fc=e=>{const t=y.useContext(Je);t||v();const{contextId:n,isMovementAllowed:r}=t,o=y.useRef(null),s=y.useRef(null),{children:i,droppableId:a,type:l,mode:d,direction:f,ignoreContainerClipping:u,isDropDisabled:c,isCombineEnabled:m,snapshot:h,useClone:g,updateViewportMaxScroll:b,getContainerForClone:x}=e,C=S(()=>o.current,[]),D=S((T=null)=>{o.current=T},[]);S(()=>s.current,[]);const I=S((T=null)=>{s.current=T},[]),w=S(()=>{r()&&b({maxScroll:jr()})},[r,b]);jc({droppableId:a,type:l,mode:d,direction:f,isDropDisabled:c,isCombineEnabled:m,ignoreContainerClipping:u,getDroppableRef:C});const N=E(()=>O.createElement(Lc,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:T,data:_,animate:J})=>O.createElement(Bc,{placeholder:_,onClose:T,innerRef:I,animate:J,contextId:n,onTransitionEnd:w})),[n,w,e.placeholder,e.shouldAnimatePlaceholder,I]),j=E(()=>({innerRef:D,placeholder:N,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,N,D]),P=g?g.dragging.draggableId:null,H=E(()=>({droppableId:a,type:l,isUsingCloneFor:P}),[a,P,l]);function A(){if(!g)return null;const{dragging:T,render:_}=g,J=O.createElement(Yr,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Xe,Y)=>_(Xe,Y,T));return so.createPortal(J,x())}return O.createElement(qt.Provider,{value:H},i(j,h),A())};function _c(){return document.body||v(),document.body}const Bn={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_c},Qr=e=>{let t={...e},n;for(n in Bn)e[n]===void 0&&(t={...t,[n]:Bn[n]});return t},gt=(e,t)=>e===t.droppable.type,Ln=(e,t)=>t.draggables[e.draggable.id],$c=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=M(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=M((s,i,a,l,d,f)=>{const u=d.descriptor.id;if(d.descriptor.droppableId===s){const h=f?{render:f,dragging:n(d.descriptor)}:null,g={isDraggingOver:a,draggingOverWith:a?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:h}}if(!i)return t;if(!l)return e;const m={isDraggingOver:a,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(s,i)=>{const a=Qr(i),l=a.droppableId,d=a.type,f=!a.isDropDisabled,u=a.renderClone;if(we(s)){const c=s.critical;if(!gt(d,c))return t;const m=Ln(c,s.dimensions),h=G(s.impact)===l;return r(l,f,h,h,m,u)}if(s.phase==="DROP_ANIMATING"){const c=s.completed;if(!gt(d,c.critical))return t;const m=Ln(c.critical,s.dimensions);return r(l,f,qr(c.result)===l,G(c.impact)===l,m,u)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const c=s.completed;if(!gt(d,c.critical))return t;const m=G(c.impact)===l,h=!!(c.impact.at&&c.impact.at.type==="COMBINE"),g=c.critical.droppable.id===l;return m?h?e:t:g?e:t}return t}},Gc={updateViewportMaxScroll:Zi},Fn=Zn($c,Gc,(e,t,n)=>({...Qr(n),...e,...t}),{context:Vt,areStatePropsEqual:zr})(Fc);class Wc extends O.Component{getCategoryClass(t){switch(t){case"main":return"main-course";case"drink":return"drink";case"dessert":return"dessert";default:return""}}render(){const{item:t}=this.props;return p.jsxs("div",{className:`menu-item ${this.getCategoryClass(t.category)}`,role:"listitem","aria-label":`${t.name}, ${t.price} Kč`,children:[p.jsx("div",{className:"item-name",children:t.name}),p.jsxs("div",{className:"item-price","aria-label":`${t.price} Kč`,children:[t.price," Kč"]})]})}}var eo={exports:{}},Hc="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vc=Hc,Uc=Vc;function to(){}function no(){}no.resetWarningCache=to;var zc=function(){function e(r,o,s,i,a,l){if(l!==Uc){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:no,resetWarningCache:to};return n.PropTypes=n,n};eo.exports=zc();var qc=eo.exports;const re=io(qc);function Kc(e){return function(n){const r=_n(),o=ao();return p.jsx(e,{...n,location:r,navigate:o})}}class ro extends y.Component{constructor(t){super(t),this.state={currentOrder:[],selectedTable:null,selectedCategory:"Vše",isLoading:!0,showTableModal:!1},this.menuItemsRef=O.createRef(),this.onDragEnd=this.onDragEnd.bind(this),this.removeItem=this.removeItem.bind(this),this.calculateTotal=this.calculateTotal.bind(this),this.handleTableSelect=this.handleTableSelect.bind(this),this.handleSubmitOrder=this.handleSubmitOrder.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.handleOpenTableModal=this.handleOpenTableModal.bind(this),this.handleCloseTableModal=this.handleCloseTableModal.bind(this)}componentDidMount(){setTimeout(()=>{this.setState({isLoading:!1})},500)}getGroupedMenuItems(){const{menuItems:t}=this.props,n=t.reduce((i,a)=>{const l=a.category||"Uncategorized";return i[l]||(i[l]=[]),i[l].push(a),i},{}),r=["main","drink","dessert"];return Object.keys(n).sort((i,a)=>{const l=r.indexOf(i),d=r.indexOf(a);return l!==-1&&d!==-1?l-d:l!==-1?-1:d!==-1?1:i.localeCompare(a)}).map(i=>({category:i,items:n[i]}))}getFilteredMenuItems(){const{menuItems:t}=this.props,{selectedCategory:n}=this.state;return n==="Vše"?t:this.getGroupedMenuItems().reduce((o,s)=>(o[s.category]=s.items,o),{})[n]||[]}handleCategoryChange(t){this.setState({selectedCategory:t})}onDragEnd(t){if(t.destination&&t.source.droppableId==="menu-drop-area"&&t.destination.droppableId==="order-drop-area"){const{menuItems:n}=this.props,r=n.find(o=>o.id===parseInt(t.draggableId));r&&this.setState(o=>({currentOrder:[...o.currentOrder,{...r}]}))}}removeItem(t){this.setState(n=>{const r=[...n.currentOrder];return r.splice(t,1),{currentOrder:r}})}calculateTotal(){return this.state.currentOrder.reduce((t,n)=>t+n.price,0)}handleOpenTableModal(){this.setState({showTableModal:!0})}handleCloseTableModal(){this.setState({showTableModal:!1})}handleTableSelect(t){this.setState({selectedTable:t,showTableModal:!1})}handleSubmitOrder(){const{selectedTable:t,currentOrder:n}=this.state,{setOrders:r,navigate:o}=this.props;if(!t){alert("Vyberte prosím stůl.");return}if(n.length===0){alert("Objednávka je prázdná!");return}const s={id:Date.now(),tableId:t.id,tableName:t.name,items:n,total:this.calculateTotal(),status:"pending",timestamp:new Date().toISOString()};r(i=>[...i,s]),this.setState({currentOrder:[],selectedTable:null}),alert("Objednávka byla úspěšně vytvořena!"),o("/")}renderMenuItems(t,n){return p.jsx(Cc,{draggableId:t.id.toString(),index:n,children:r=>p.jsx("div",{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,children:p.jsx(Wc,{item:t})})},t.id)}renderOrderItems(t,n){return p.jsxs("div",{className:"order-item",children:[p.jsxs("span",{children:[t.name," "]}),p.jsxs("span",{children:[t.price," Kč"]}),p.jsx("button",{className:"remove-btn",onClick:()=>this.removeItem(n),children:"X"})]},n)}render(){var u;const{currentOrder:t,selectedTable:n,selectedCategory:r,isLoading:o,showTableModal:s}=this.state,{menuItems:i,tables:a,customCategories:l}=this.props,d=this.getGroupedMenuItems(),f=r==="Vše"?i:((u=d.find(c=>c.category===r))==null?void 0:u.items)||[];return o?p.jsx("div",{className:"loading",children:"Načítání..."}):p.jsx(nc,{onDragEnd:this.onDragEnd,children:p.jsxs("div",{className:"new-order-container",children:[p.jsxs("div",{className:"menu-section",children:[p.jsx("div",{className:"category-filter",children:["Vše","main","drink","dessert",...l].map(c=>p.jsx("button",{className:r===c?"category-btn active":"category-btn",onClick:()=>this.handleCategoryChange(c),children:c==="Vše"?"Vše":c==="main"?"Hlavní jídla":c==="drink"?"Nápoje":c==="dessert"?"Dezerty":c},c))}),p.jsx(Fn,{droppableId:"menu-drop-area",isDropDisabled:!0,children:c=>p.jsxs("div",{className:"menu-items",ref:c.innerRef,...c.droppableProps,children:[r==="Vše"?d.map(m=>m.items.length>0&&p.jsxs("div",{className:"menu-category",children:[p.jsx("h4",{className:"category-title",children:m.category==="main"?"Hlavní jídla":m.category==="drink"?"Nápoje":m.category==="dessert"?"Dezerty":m.category}),m.items.map((h,g)=>this.renderMenuItems(h,g))]},m.category)):f.length>0?p.jsx("div",{className:"menu-category",children:f.map((m,h)=>this.renderMenuItems(m,h))}):p.jsx("div",{className:"empty-state",children:"Žádné položky v této kategorii."}),c.placeholder]})})]}),p.jsxs("div",{className:"order-section",children:[p.jsx("div",{className:"selected-table",children:n?p.jsxs(p.Fragment,{children:[p.jsx("h3",{children:n.name}),p.jsx("button",{className:"change-table-btn",onClick:this.handleOpenTableModal,children:"Změnit stůl"})]}):p.jsx("button",{className:"select-table-btn",onClick:this.handleOpenTableModal,children:"Vybrat stůl"})}),p.jsx(Fn,{droppableId:"order-drop-area",children:c=>p.jsxs("div",{className:"order-items",...c.droppableProps,ref:c.innerRef,children:[t.length===0?p.jsx("div",{className:"empty-order",children:"Přetáhněte položky menu sem"}):t.map((m,h)=>this.renderOrderItems(m,h)),c.placeholder]})}),p.jsxs("div",{className:"order-summary",children:[p.jsxs("div",{className:"total-amount",children:["Celkem: ",this.calculateTotal()," Kč"]}),p.jsx("button",{className:"submit-btn",disabled:t.length===0||!n,onClick:this.handleSubmitOrder,children:"Odeslat objednávku"})]}),s&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h3",{children:"Vyberte stůl"}),p.jsx("div",{className:"table-list",children:a.map(c=>p.jsx("div",{className:"table-item",onClick:()=>this.handleTableSelect(c),children:c.name},c.id))}),p.jsx("div",{className:"modal-actions",children:p.jsx("button",{className:"btn btn-secondary",onClick:this.handleCloseTableModal,children:"Zrušit"})})]})})]})]})})}}ro.propTypes={menuItems:re.array.isRequired,tables:re.array.isRequired,customCategories:re.array.isRequired,location:re.object.isRequired,navigate:re.func.isRequired,setOrders:re.func.isRequired};const Yc=Kc(ro);function Jc(e={}){return new Promise((t,n)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t,n,e):n(new Error("Geolocation is not supported by this browser."))})}async function Zc(){const e=await Jc();return{latitude:e.coords.latitude,longitude:e.coords.longitude}}class Xc extends O.Component{constructor(t){super(t),this.state={filteredHistory:[],dateFrom:"",dateTo:"",isLoading:!1,paymentMethodFilter:"all",sortOrder:"desc"},this.handleDateFromChange=this.handleDateFromChange.bind(this),this.handleDateToChange=this.handleDateToChange.bind(this),this.handlePaymentMethodFilterChange=this.handlePaymentMethodFilterChange.bind(this),this.handleSortOrderChange=this.handleSortOrderChange.bind(this),this.filterHistory=this.filterHistory.bind(this),this.handleShowLocation=this.handleShowLocation.bind(this)}componentDidMount(){this.filterHistory(this.props.history)}componentDidUpdate(t,n){(t.history!==this.props.history||n.dateFrom!==this.state.dateFrom||n.dateTo!==this.state.dateTo||n.paymentMethodFilter!==this.state.paymentMethodFilter||n.sortOrder!==this.state.sortOrder)&&this.filterHistory(this.props.history)}handleDateFromChange(t){this.setState({dateFrom:t.target.value})}handleDateToChange(t){this.setState({dateTo:t.target.value})}handlePaymentMethodFilterChange(t){this.setState({paymentMethodFilter:t.target.value})}handleSortOrderChange(t){this.setState({sortOrder:t.target.value})}filterHistory(t){const{dateFrom:n,dateTo:r,paymentMethodFilter:o,sortOrder:s}=this.state;let i=[...t];n&&(i=i.filter(a=>new Date(a.paymentTimestamp)>=new Date(n))),r&&(i=i.filter(a=>new Date(a.paymentTimestamp)<=new Date(`${r}T23:59:59`))),o!=="all"&&(i=i.filter(a=>a.paymentMethod===o)),i.sort((a,l)=>{const d=new Date(a.paymentTimestamp),f=new Date(l.paymentTimestamp);return s==="asc"?d-f:f-d}),this.setState({filteredHistory:i})}calculateStats(){const{filteredHistory:t}=this.state,n=t.reduce((i,a)=>i+a.total,0),r=t.length,o=r>0?n/r:0,s=t.reduce((i,a)=>i+a.items.length,0);return{revenue:n,count:r,averageTransaction:o,totalItemsSold:s}}async handleShowLocation(){this.setState({isLoading:!0});try{const t=await Zc();this.props.showLocation(t)}catch(t){alert(t.message)}finally{this.setState({isLoading:!1})}}render(){const{filteredHistory:t,dateFrom:n,dateTo:r,isLoading:o,paymentMethodFilter:s,sortOrder:i}=this.state,{history:a}=this.props,{revenue:l,count:d,averageTransaction:f,totalItemsSold:u}=this.calculateStats();return p.jsxs("div",{className:"history-container",role:"main",children:[p.jsx("h2",{children:"Historie tržeb"}),p.jsxs("div",{className:"history-filters",role:"search",children:[p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{htmlFor:"dateFrom",children:"Od:"}),p.jsx("input",{id:"dateFrom",type:"date",value:n,onChange:this.handleDateFromChange,"aria-label":"Filtrovat od data"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{htmlFor:"dateTo",children:"Do:"}),p.jsx("input",{id:"dateTo",type:"date",value:r,onChange:this.handleDateToChange,"aria-label":"Filtrovat do data"})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{htmlFor:"paymentMethod",children:"Způsob platby:"}),p.jsxs("select",{id:"paymentMethod",value:s,onChange:this.handlePaymentMethodFilterChange,"aria-label":"Filtrovat podle způsobu platby",children:[p.jsx("option",{value:"all",children:"Všechny"}),p.jsx("option",{value:"cash",children:"Hotovost"}),p.jsx("option",{value:"card",children:"Karta"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{htmlFor:"sortOrder",children:"Řadit dle data:"}),p.jsxs("select",{id:"sortOrder",value:i,onChange:this.handleSortOrderChange,"aria-label":"Řadit podle data",children:[p.jsx("option",{value:"desc",children:"Nejnovější"}),p.jsx("option",{value:"asc",children:"Nejstarší"})]})]}),p.jsx("button",{className:"filter-btn",onClick:()=>this.filterHistory(a),"aria-label":"Aplikovat filtry",children:"Filtrovat"})]}),p.jsxs("div",{className:"history-stats",role:"region","aria-label":"Statistiky tržeb",children:[p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Celková tržba:"}),p.jsxs("span",{className:"stat-value","aria-label":`Celková tržba ${l.toFixed(2)} Kč`,children:[l.toFixed(2)," Kč"]})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Počet transakcí:"}),p.jsx("span",{className:"stat-value","aria-label":`Počet transakcí ${d}`,children:d})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Průměrná hodnota transakce:"}),p.jsxs("span",{className:"stat-value","aria-label":`Průměrná hodnota transakce ${f.toFixed(2)} Kč`,children:[f.toFixed(2)," Kč"]})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Celkem prodaných položek:"}),p.jsx("span",{className:"stat-value","aria-label":`Celkem prodaných položek ${u}`,children:u})]})]}),p.jsx("div",{className:"history-list",role:"list",children:t.length===0?p.jsx("div",{className:"empty-state",role:"status",children:"Žádné transakce v zadaném období"}):t.map(c=>p.jsxs("div",{className:"history-item",role:"listitem",children:[p.jsxs("div",{className:"transaction-header",children:[p.jsxs("h3",{children:["Transakce #",c.id.toString().slice(-4)]}),p.jsxs("p",{children:["Datum: ",new Date(c.paymentTimestamp).toLocaleString()]}),c.tableName&&p.jsxs("p",{children:[" ",c.tableName]})]}),p.jsxs("div",{className:"transaction-details",children:[p.jsx("div",{className:"transaction-items",role:"list",children:c.items.map((m,h)=>p.jsxs("div",{className:"transaction-item",role:"listitem",children:[p.jsx("span",{children:m.name}),p.jsxs("span",{"aria-label":`${m.price} Kč`,children:[m.price," Kč"]})]},h))}),p.jsxs("div",{className:"transaction-summary",children:[p.jsxs("div",{className:"transaction-total",role:"status",children:["Celkem: ",p.jsxs("span",{"aria-label":`Celková částka ${c.total} Kč`,children:[c.total," Kč"]})]}),p.jsxs("div",{className:"transaction-method",role:"status",children:["Platba: ",c.paymentMethod==="cash"?"Hotovost":"Karta"]})]})]})]},c.id))}),p.jsx("button",{className:"location-btn",onClick:this.handleShowLocation,disabled:o,"aria-label":"Zobrazit moji aktuální polohu",children:o?"Načítání...":"Zobrazit moji polohu"})]})}}class Qc extends O.Component{constructor(t){super(t),this.state={formData:{name:"",price:"",category:"main"},editingId:null,deleteConfirmId:null,selectedCategory:"all",newCategoryName:"",showCategoryModal:!1,editingCategories:[],isLoading:!1,svgColor:"currentColor"},this.formRef=O.createRef(),this.svgRef=O.createRef(),this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.editItem=this.editItem.bind(this),this.requestDeleteItem=this.requestDeleteItem.bind(this),this.confirmDelete=this.confirmDelete.bind(this),this.cancelDelete=this.cancelDelete.bind(this),this.handleAddCategory=this.handleAddCategory.bind(this),this.openCategoryModal=this.openCategoryModal.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.handleDeleteCategory=this.handleDeleteCategory.bind(this),this.handleSaveCategories=this.handleSaveCategories.bind(this),this.getCategoryDisplayName=this.getCategoryDisplayName.bind(this),this.handleSvgClick=this.handleSvgClick.bind(this)}componentDidMount(){this.setState({isLoading:!1})}componentWillUnmount(){}getGroupedMenuItems(){const{menuItems:t,customCategories:n}=this.props,r=t.reduce((s,i)=>{const a=i.category||"Uncategorized";return s[a]||(s[a]=[]),s[a].push(i),s},{});return["main","drink","dessert",...n].filter(s=>r[s]).map(s=>({category:s,items:r[s]}))}getFilteredMenuItems(){const{menuItems:t}=this.props,{selectedCategory:n}=this.state;return n==="all"?t:t.filter(r=>r.category===n)}handleInputChange(t){const{name:n,value:r}=t.target;this.setState(o=>({formData:{...o.formData,[n]:n==="price"?parseFloat(r)||"":r}}))}handleSubmit(t){t.preventDefault();const{formData:n,editingId:r}=this.state,{menuItems:o,setMenuItems:s,nextItemId:i,setNextItemId:a}=this.props;if(!n.name||!n.price){alert("Vyplňte všechny údaje!");return}if(r)s(o.map(l=>l.id===r?{...n,id:r}:l)),this.setState({editingId:null});else{const l={...n,id:i};s([...o,l]),a(i+1)}this.setState({formData:{name:"",price:"",category:"main"}})}editItem(t){var o;const{menuItems:n}=this.props,r=n.find(s=>s.id===t);r&&(this.setState({formData:{name:r.name,price:r.price,category:r.category},editingId:t}),(o=this.formRef.current)==null||o.scrollIntoView({behavior:"smooth",block:"start"}))}requestDeleteItem(t){this.setState({deleteConfirmId:t})}confirmDelete(){const{menuItems:t,setMenuItems:n}=this.props,{deleteConfirmId:r}=this.state;n(t.filter(o=>o.id!==r)),this.setState({deleteConfirmId:null})}cancelDelete(){this.setState({deleteConfirmId:null})}handleAddCategory(){const{newCategoryName:t}=this.state,{customCategories:n,setCustomCategories:r}=this.props;if(t.trim()){if(n.includes(t.trim())){alert("Tato kategorie již existuje!");return}const o=[...n,t.trim()];r(o),this.setState({newCategoryName:""})}}openCategoryModal(){this.setState({editingCategories:[...this.props.customCategories],showCategoryModal:!0})}handleCategoryChange(t,n){this.setState(r=>{const o=[...r.editingCategories];return o[t]=n,{editingCategories:o}})}handleDeleteCategory(t){const{editingCategories:n}=this.state,{menuItems:r}=this.props,o=n[t];if(r.some(i=>i.category===o)){alert("Tuto kategorii nelze smazat, protože je používána v menu!");return}this.setState(i=>({editingCategories:i.editingCategories.filter((a,l)=>l!==t)}))}handleSaveCategories(){const{editingCategories:t}=this.state,{menuItems:n,setMenuItems:r,setCustomCategories:o}=this.props;if(new Set(t).size!==t.length){alert("Kategorie nemohou mít stejný název!");return}const i=n.map(a=>{const l=a.category,d=t.find(f=>f===l);return d?{...a,category:d}:a});r(i),o(t),this.setState({showCategoryModal:!1})}getCategoryDisplayName(t){switch(t){case"main":return"Hlavní jídlo";case"drink":return"Nápoj";case"dessert":return"Dezert";default:return t}}handleSvgClick(){console.log("SVG clicked!"),this.setState(t=>({svgColor:t.svgColor==="currentColor"?"blue":"currentColor"}))}render(){const{formData:t,editingId:n,deleteConfirmId:r,selectedCategory:o,newCategoryName:s,showCategoryModal:i,editingCategories:a,isLoading:l,svgColor:d}=this.state,{menuItems:f,customCategories:u}=this.props;if(l)return p.jsx("div",{className:"loading",role:"status","aria-label":"Načítání",children:"Načítání..."});const c=this.getFilteredMenuItems(),h=["all",...["main","drink","dessert"],...u];return p.jsxs("div",{className:"menu-management",role:"main",children:[p.jsx("h2",{children:"Správa menu"}),p.jsxs("section",{className:"menu-management-container",children:[p.jsxs("section",{className:"menu-form-section",children:[p.jsx("h3",{className:"section-title",children:"Přidat/Upravit položku"}),p.jsxs("div",{className:"menu-form card",ref:this.formRef,role:"form","aria-label":n?"Upravit položku menu":"Přidat novou položku do menu",children:[p.jsx("h4",{children:n?"Upravit položku":"Přidat novou položku"}),p.jsxs("form",{onSubmit:this.handleSubmit,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"itemName",children:"Název:"}),p.jsx("input",{type:"text",id:"itemName",name:"name",value:t.name,onChange:this.handleInputChange,required:!0,"aria-label":"Název položky menu",placeholder:"Zadejte název položky",autoFocus:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"itemPrice",children:"Cena:"}),p.jsx("input",{type:"number",id:"itemPrice",name:"price",value:t.price,onChange:this.handleInputChange,required:!0,"aria-label":"Cena položky menu",placeholder:"Zadejte cenu položky",step:"0.01"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"itemCategory",children:"Kategorie:"}),p.jsxs("select",{id:"itemCategory",name:"category",value:t.category,onChange:this.handleInputChange,required:!0,"aria-label":"Vyberte kategorii položky menu",children:[p.jsx("option",{value:"main",children:"Hlavní jídlo"}),p.jsx("option",{value:"drink",children:"Nápoj"}),p.jsx("option",{value:"dessert",children:"Dezert"}),u.map(g=>p.jsx("option",{value:g,children:g},g))]})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"submit",className:"submit-btn",children:n?"Uložit změny":"Přidat položku"}),n&&p.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>this.setState({editingId:null,formData:{name:"",price:"",category:"main"}}),children:"Zrušit úpravy"})]})]})]})]}),p.jsxs("section",{className:"menu-list-section",children:[p.jsx("h3",{className:"section-title",children:"Seznam položek menu"}),p.jsxs("div",{className:"menu-list card",children:[p.jsx("div",{className:"menu-list-header",children:p.jsxs("h4",{children:["Dostupné položky",p.jsx("svg",{ref:this.svgRef,onClick:this.handleSvgClick,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:d,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginLeft:"10px",cursor:"pointer"},children:p.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8m-3 4a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16m18-8v4h-4m-3 4h4v4"})})]})}),p.jsxs("div",{className:"category-filter",role:"tablist","aria-label":"Filtry kategorií",children:[h.map(g=>p.jsx("button",{className:o===g?"category-btn active":"category-btn",onClick:()=>this.setState({selectedCategory:g}),role:"tab","aria-selected":o===g,children:g==="all"?"Vše":this.getCategoryDisplayName(g)},g)),p.jsx("button",{className:"category-btn manage-categories-btn",onClick:this.openCategoryModal,children:"Spravovat kategorie"})]}),p.jsx("div",{className:"menu-items",children:c.length===0?p.jsx("div",{className:"empty-state",children:"Žádné položky k zobrazení."}):c.map(g=>p.jsxs("div",{className:"menu-item",children:[p.jsxs("div",{className:"menu-item-content",children:[p.jsx("span",{className:"item-name",children:g.name}),p.jsxs("span",{className:"item-price",children:[g.price," Kč"]})]}),p.jsxs("div",{className:"item-actions",children:[p.jsx("button",{className:"edit-btn",onClick:()=>this.editItem(g.id),children:"Upravit"}),p.jsx("button",{className:"delete-btn",onClick:()=>this.requestDeleteItem(g.id),children:"Smazat"})]})]},g.id))})]})]})]}),r!==null&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h3",{children:"Potvrdit smazání"}),p.jsx("p",{children:"Opravdu chcete smazat tuto položku?"}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"cancel-btn",onClick:this.cancelDelete,children:"Zrušit"}),p.jsx("button",{className:"confirm-btn",onClick:this.confirmDelete,children:"Smazat"})]})]})}),i&&p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h3",{children:"Spravovat kategorie"}),p.jsxs("div",{className:"modal-body",children:[p.jsx("div",{className:"categories-list",children:a.map((g,b)=>p.jsxs("div",{className:"category-edit-item",children:[p.jsx("input",{type:"text",value:g,onChange:x=>this.handleCategoryChange(b,x.target.value),className:"form-input"}),p.jsx("button",{onClick:()=>this.handleDeleteCategory(b),className:"btn-error",children:"Smazat"})]},b))}),p.jsxs("div",{className:"add-category-input",children:[p.jsx("input",{type:"text",value:s,onChange:g=>this.setState({newCategoryName:g.target.value}),placeholder:"Nová kategorie",className:"form-input"}),p.jsx("button",{onClick:this.handleAddCategory,className:"btn-primary",children:"Přidat"})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"btn btn-secondary",onClick:()=>this.setState({showCategoryModal:!1,newCategoryName:""}),children:"Zrušit"}),p.jsx("button",{className:"btn btn-primary",onClick:this.handleSaveCategories,children:"Uložit"})]})]})})]})}}class ed extends O.Component{constructor(t){super(t),this.state={selectedOrders:[],paymentMethod:"cash",amountReceived:"",change:0,selectedTable:null},this.toggleOrderSelection=this.toggleOrderSelection.bind(this),this.calculateTotal=this.calculateTotal.bind(this),this.processPayment=this.processPayment.bind(this),this.generateReceipt=this.generateReceipt.bind(this),this.updateOrderStatus=this.updateOrderStatus.bind(this)}componentDidUpdate(t,n){if((n.amountReceived!==this.state.amountReceived||n.paymentMethod!==this.state.paymentMethod||n.selectedOrders!==this.state.selectedOrders)&&this.state.paymentMethod==="cash"&&this.state.amountReceived){const r=this.calculateTotal();this.setState({change:Math.max(0,parseFloat(this.state.amountReceived)-r)})}}toggleOrderSelection(t){this.setState(n=>({selectedOrders:n.selectedOrders.includes(t)?n.selectedOrders.filter(r=>r!==t):[...n.selectedOrders,t]}))}calculateTotal(){const{orders:t}=this.props,{selectedOrders:n}=this.state;return t.filter(o=>o.status==="ready").filter(o=>n.includes(o.id)).reduce((o,s)=>o+s.total,0)}processPayment(){const{orders:t,setOrders:n,setHistory:r,showReceipt:o}=this.props,{selectedOrders:s,paymentMethod:i,amountReceived:a}=this.state,l=this.calculateTotal();if(i==="cash"&&parseFloat(a)<l){alert("Obdržená částka je menší než celková cena!");return}const d=t.filter(h=>s.includes(h.id)),f=t.filter(h=>!s.includes(h.id)),u=new Date,c=d.map(h=>({...h,status:"paid",paymentMethod:i,paymentTimestamp:u.toISOString()}));n(f),r(h=>[...h,...c]),this.setState({selectedOrders:[],amountReceived:"",change:0,selectedTable:null});const m=this.generateReceipt(d,i,l);o(m)}generateReceipt(t,n,r){const{amountReceived:o,change:s}=this.state;let i=`=== RESTAURACE ===
`;return i+=`Datum: ${new Date().toLocaleString()}
`,i+=`------------------
`,t.forEach(a=>{i+=`Objednávka #${a.id.toString().slice(-4)}
`,a.items.forEach(l=>{i+=`${l.name.padEnd(20," ")} ${l.price.toFixed(2).padStart(8," ")} Kč
`}),i+=`${"Celkem:".padEnd(20," ")} ${a.total.toFixed(2).padStart(8," ")} Kč
`,i+=`------------------
`}),i+=`${"Celková částka:".padEnd(20," ")} ${r.toFixed(2).padStart(8," ")} Kč
`,i+=`Způsob platby: ${n==="cash"?"Hotovost":"Karta"}
`,n==="cash"&&(i+=`Obdržená částka: ${parseFloat(o).toFixed(2)} Kč
`,i+=`Vráceno: ${s.toFixed(2)} Kč
`),i+=`==================
`,i+=`Děkujeme za návštěvu!
`,i}updateOrderStatus(t,n){this.props.setOrders(r=>r.map(o=>o.id===t?{...o,status:n}:o))}render(){const{orders:t,setOrders:n,setHistory:r,showReceipt:o}=this.props,{selectedOrders:s,paymentMethod:i,amountReceived:a,change:l,selectedTable:d}=this.state,f=t.filter(c=>c.status==="ready"),u=this.calculateTotal();return p.jsxs("div",{className:"payment-container",role:"main",children:[p.jsx("h2",{children:"Platba"}),d?p.jsxs("div",{className:"payment-content",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("button",{className:"back-btn",onClick:()=>this.setState({selectedTable:null}),"aria-label":"Zpět na výběr stolu",children:"← Zpět na výběr stolu"}),p.jsxs("h3",{children:["Objednávky připravené k platbě pro ",d.name]})]}),p.jsx("div",{className:"orders-section",children:f.filter(c=>c.tableId===d.id).length===0?p.jsx("div",{className:"empty-state",role:"status",children:"Žádné objednávky připravené k platbě pro tento stůl"}):p.jsx("div",{className:"orders-list",role:"list",children:f.filter(c=>c.tableId===d.id).map(c=>p.jsx("div",{className:"payment-order-card",role:"listitem",children:p.jsxs("label",{className:"order-checkbox",children:[p.jsx("input",{type:"checkbox",checked:s.includes(c.id),onChange:()=>this.toggleOrderSelection(c.id),"aria-label":`Vybrat objednávku ${c.id} k platbě`}),p.jsx(Hn,{order:c,compact:!0,updateStatus:this.updateOrderStatus})]})},c.id))})}),p.jsxs("div",{className:"payment-section",children:[p.jsx("h3",{children:"Způsob platby"}),p.jsxs("div",{className:"payment-methods",role:"radiogroup","aria-label":"Výběr způsobu platby",children:[p.jsxs("div",{className:"payment-method-wrapper",children:[p.jsx("input",{type:"radio",id:"cash",name:"paymentMethod",value:"cash",checked:i==="cash",onChange:()=>this.setState({paymentMethod:"cash",amountReceived:"",change:0}),"aria-label":"Platba hotovostí"}),p.jsx("label",{className:"payment-method",htmlFor:"cash",children:p.jsx("span",{children:"Hotovost"})})]}),p.jsxs("div",{className:"payment-method-wrapper",children:[p.jsx("input",{type:"radio",id:"card",name:"paymentMethod",value:"card",checked:i==="card",onChange:()=>this.setState({paymentMethod:"card",amountReceived:"",change:0}),"aria-label":"Platba kartou"}),p.jsx("label",{className:"payment-method",htmlFor:"card",children:p.jsx("span",{children:"Karta"})})]})]}),i==="cash"&&p.jsxs("div",{className:"cash-details",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"amountReceived",children:"Obdržená částka (Kč)"}),p.jsx("input",{id:"amountReceived",type:"number",value:a,onChange:c=>this.setState({amountReceived:c.target.value}),min:u,step:"1","aria-label":`Obdržená částka v Kč, minimálně ${u} Kč`})]}),p.jsxs("div",{className:"change-amount",role:"status",children:["Vráceno: ",p.jsxs("span",{"aria-label":`Vrácená částka ${l.toFixed(2)} Kč`,children:[l.toFixed(2)," Kč"]})]})]}),p.jsxs("div",{className:"payment-summary",children:[p.jsxs("div",{className:"total-amount",role:"status",children:["Celkem k platbě: ",p.jsxs("span",{"aria-label":`Celková částka k platbě ${u.toFixed(2)} Kč`,children:[u.toFixed(2)," Kč"]})]}),p.jsx("button",{className:"process-payment-btn",onClick:this.processPayment,disabled:s.length===0||i==="cash"&&(!a||parseFloat(a)<u),"aria-label":"Zpracovat platbu",children:"Zpracovat platbu"})]})]})]}):p.jsxs("div",{className:"table-selection",children:[p.jsx("h3",{children:"Vyberte stůl k platbě"}),p.jsx("div",{className:"table-list",role:"radiogroup","aria-label":"Výběr stolu k platbě",children:[{id:1,name:"Stůl 1"},{id:2,name:"Stůl 2"},{id:3,name:"Stůl 3"},{id:4,name:"Stůl 4"}].map(c=>p.jsx("div",{className:"table-item",onClick:()=>this.setState({selectedTable:c}),role:"radio","aria-checked":(d==null?void 0:d.id)===c.id,tabIndex:0,"aria-label":c.name,children:c.name},c.id))})]})]})}}class td extends y.Component{constructor(t){super(t),this.state={orders:JSON.parse(localStorage.getItem("orders"))||[],history:JSON.parse(localStorage.getItem("history"))||[],menuItems:JSON.parse(localStorage.getItem("menuItems"))||[{id:1,name:"Kuřecí řízek",price:150,category:"main"},{id:2,name:"Hovězí guláš",price:130,category:"main"},{id:3,name:"Pivo",price:35,category:"drink"},{id:4,name:"Kola",price:30,category:"drink"},{id:5,name:"Zmrzlina",price:45,category:"dessert"}],nextItemId:JSON.parse(localStorage.getItem("nextItemId"))||6,customCategories:JSON.parse(localStorage.getItem("customCategories"))||[],tables:JSON.parse(localStorage.getItem("tables"))||[{id:1,name:"Stůl 1"},{id:2,name:"Stůl 2"},{id:3,name:"Stůl 3"},{id:4,name:"Stůl 4"}]},this.updateOrderStatus=this.updateOrderStatus.bind(this),this.showLocation=this.showLocation.bind(this),this.showReceipt=this.showReceipt.bind(this),this.setOrders=this.setOrders.bind(this),this.setHistory=this.setHistory.bind(this),this.setMenuItems=this.setMenuItems.bind(this),this.setNextItemId=this.setNextItemId.bind(this),this.setCustomCategories=this.setCustomCategories.bind(this)}componentDidUpdate(t,n){n.orders!==this.state.orders&&localStorage.setItem("orders",JSON.stringify(this.state.orders)),n.history!==this.state.history&&localStorage.setItem("history",JSON.stringify(this.state.history)),n.menuItems!==this.state.menuItems&&localStorage.setItem("menuItems",JSON.stringify(this.state.menuItems)),n.nextItemId!==this.state.nextItemId&&localStorage.setItem("nextItemId",JSON.stringify(this.state.nextItemId)),n.customCategories!==this.state.customCategories&&localStorage.setItem("customCategories",JSON.stringify(this.state.customCategories))}setOrders(t){this.setState(n=>{const r=typeof t=="function"?t(n.orders):t;return localStorage.setItem("orders",JSON.stringify(r)),{orders:r}})}setHistory(t){this.setState(n=>{const r=typeof t=="function"?t(n.history):t;return localStorage.setItem("history",JSON.stringify(r)),{history:r}})}setMenuItems(t){this.setState(n=>{const r=typeof t=="function"?t(n.menuItems):t;return localStorage.setItem("menuItems",JSON.stringify(r)),{menuItems:r}})}setNextItemId(t){this.setState(n=>{const r=typeof t=="function"?t(n.nextItemId):t;return localStorage.setItem("nextItemId",JSON.stringify(r)),{nextItemId:r}})}setCustomCategories(t){this.setState(n=>{const r=typeof t=="function"?t(n.customCategories):t;return localStorage.setItem("customCategories",JSON.stringify(r)),{customCategories:r}})}updateOrderStatus(t,n){this.setOrders(r=>r.map(o=>o.id===t?{...o,status:n}:o))}showLocation(t){alert(`Vaše poloha: ${t.latitude}, ${t.longitude}`)}showReceipt(t){const n=this.state.history.find(a=>a.id===t);if(!n){alert("Účtenka nebyla nalezena.");return}const r=a=>{let l=`
`;return l+=`==================
`,l+=`=== RESTAURACE ===
`,l+=`==================

`,l+=`Transakce #${a.id.toString().slice(-4)}
`,l+=`Datum: ${new Date(a.paymentTimestamp).toLocaleString()}

`,l+=`${a.tableName}
`,l+=`Číslo objednávky: ${a.id}

`,l+=`------------------

`,l+=`Položky:

`,a.items.forEach(d=>{l+=`${d.name} ${d.price} Kč
`}),l+=`
------------------

`,l+=`Celkem: ${a.total} Kč
`,l+=`Platba: ${a.paymentMethod==="cash"?"Hotovost":"Karta"}

`,l+=`==================

`,l+=`Děkujeme za návštěvu!
`,l+=`Vítejte znovu

`,l+=`=== Harukoid s.r.o. ===
`,l},o=window.open("","_blank");if(!o){alert("Pop-up blokován. Povolte prosím vyskakovací okna pro tisk účtenky.");return}const s=r(n),i=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Účtenka #${n.id.toString().slice(-4)}</title>
          <style>
            @page {
              size: 5.5in 8.5in; /* Typical receipt size */
              margin: 0;
            }
            body {
              font-family: monospace; /* Monospace font for receipt look */
              white-space: pre; /* Preserve line breaks and spaces */
              padding: 40px;
              font-size: 14px;
              line-height: 1.6;
              width: 5.5in;
              min-height: 8.5in;
              margin: 0;
              text-align: center;
            }
            @media print {
              body {
                padding: 40px;
                margin: 0;
                width: 5.5in;
                min-height: 8.5in;
                text-align: center;
              }
            }
          </style>
        </head>
        <body>
          ${s}
        </body>
      </html>
    `;o.document.write(i),o.document.close(),o.onload=function(){o.print(),o.onafterprint=function(){o.close()}}}render(){const{orders:t,history:n,menuItems:r,nextItemId:o,customCategories:s,tables:i}=this.state;return p.jsx(lo,{children:p.jsx("div",{className:"app",children:p.jsxs("div",{className:"app-content",children:[p.jsx(yo,{history:n,showReceipt:this.showReceipt}),p.jsxs("main",{className:"main-content",children:[" ",p.jsxs("header",{className:"app-header",children:[" ",p.jsxs("div",{className:"header-content",children:[p.jsx("h1",{children:"Restaurant Cash Register"})," ",p.jsx("div",{id:"connectionStatus",className:"connection-status",children:"Online"})]})]}),p.jsxs(co,{children:[p.jsx(me,{path:"/",element:p.jsx(xo,{orders:t,updateOrderStatus:this.updateOrderStatus})}),p.jsx(me,{path:"/new-order",element:p.jsx(Yc,{menuItems:r,tables:i,setOrders:this.setOrders,customCategories:s})}),p.jsx(me,{path:"/history",element:p.jsx(Xc,{history:n,showLocation:this.showLocation})}),p.jsx(me,{path:"/menu",element:p.jsx(Qc,{menuItems:r,setMenuItems:this.setMenuItems,nextItemId:o,setNextItemId:this.setNextItemId,customCategories:s,setCustomCategories:this.setCustomCategories})}),p.jsx(me,{path:"/payment",element:p.jsx(ed,{orders:t,setOrders:this.setOrders,setHistory:this.setHistory,showReceipt:this.showReceipt})})]})]})]})})})}}const nd=document.getElementById("root"),rd=Wn(nd);rd.render(p.jsx(O.StrictMode,{children:p.jsx(td,{})}));
//# sourceMappingURL=index-BmrbZNUc.js.map
